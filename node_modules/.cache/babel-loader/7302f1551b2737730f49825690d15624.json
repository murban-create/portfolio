{"ast":null,"code":"var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _hotKeys, _fullscreenElement, _mediaStore, _mediaStateCallback, _mediaStoreUnsubscribe, _mediaStateEventHandler, _setupDefaultStore, setupDefaultStore_fn, _keyUpHandler, keyUpHandler_fn, _keyDownHandler, keyDownHandler_fn;\nimport { MediaContainer } from \"./media-container.js\";\nimport { document, globalThis } from \"./utils/server-safe-globals.js\";\nimport { AttributeTokenList } from \"./utils/attribute-token-list.js\";\nimport { delay, stringifyRenditionList, stringifyAudioTrackList } from \"./utils/utils.js\";\nimport { stringifyTextTrackList } from \"./utils/captions.js\";\nimport { MediaUIEvents, MediaUIAttributes, MediaStateReceiverAttributes, AttributeToStateChangeEventMap, MediaUIProps } from \"./constants.js\";\nimport { getBooleanAttr, getNumericAttr, getStringAttr, setBooleanAttr, setNumericAttr, setStringAttr } from \"./utils/element-utils.js\";\nimport { createMediaStore } from \"./media-store/media-store.js\";\nimport { setLanguage } from \"./utils/i18n.js\";\nconst ButtonPressedKeys = [\"ArrowLeft\", \"ArrowRight\", \"Enter\", \" \", \"f\", \"m\", \"k\", \"c\"];\nconst DEFAULT_SEEK_OFFSET = 10;\nconst Attributes = {\n  DEFAULT_SUBTITLES: \"defaultsubtitles\",\n  DEFAULT_STREAM_TYPE: \"defaultstreamtype\",\n  DEFAULT_DURATION: \"defaultduration\",\n  FULLSCREEN_ELEMENT: \"fullscreenelement\",\n  HOTKEYS: \"hotkeys\",\n  KEYS_USED: \"keysused\",\n  LIVE_EDGE_OFFSET: \"liveedgeoffset\",\n  SEEK_TO_LIVE_OFFSET: \"seektoliveoffset\",\n  NO_AUTO_SEEK_TO_LIVE: \"noautoseektolive\",\n  NO_HOTKEYS: \"nohotkeys\",\n  NO_VOLUME_PREF: \"novolumepref\",\n  NO_SUBTITLES_LANG_PREF: \"nosubtitleslangpref\",\n  NO_DEFAULT_STORE: \"nodefaultstore\",\n  KEYBOARD_FORWARD_SEEK_OFFSET: \"keyboardforwardseekoffset\",\n  KEYBOARD_BACKWARD_SEEK_OFFSET: \"keyboardbackwardseekoffset\",\n  LANG: \"lang\"\n};\nclass MediaController extends MediaContainer {\n  constructor() {\n    super();\n    __privateAdd(this, _setupDefaultStore);\n    __privateAdd(this, _keyUpHandler);\n    __privateAdd(this, _keyDownHandler);\n    this.mediaStateReceivers = [];\n    this.associatedElementSubscriptions = /* @__PURE__ */new Map();\n    __privateAdd(this, _hotKeys, new AttributeTokenList(this, Attributes.HOTKEYS));\n    __privateAdd(this, _fullscreenElement, void 0);\n    __privateAdd(this, _mediaStore, void 0);\n    __privateAdd(this, _mediaStateCallback, void 0);\n    __privateAdd(this, _mediaStoreUnsubscribe, void 0);\n    __privateAdd(this, _mediaStateEventHandler, event => {\n      var _a;\n      (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch(event);\n    });\n    this.associateElement(this);\n    let prevState = {};\n    __privateSet(this, _mediaStateCallback, nextState => {\n      Object.entries(nextState).forEach(_ref => {\n        let [stateName, stateValue] = _ref;\n        if (stateName in prevState && prevState[stateName] === stateValue) return;\n        this.propagateMediaState(stateName, stateValue);\n        const attrName = stateName.toLowerCase();\n        const evt = new globalThis.CustomEvent(AttributeToStateChangeEventMap[attrName], {\n          composed: true,\n          detail: stateValue\n        });\n        this.dispatchEvent(evt);\n      });\n      prevState = nextState;\n    });\n    this.enableHotkeys();\n  }\n  static get observedAttributes() {\n    return super.observedAttributes.concat(Attributes.NO_HOTKEYS, Attributes.HOTKEYS, Attributes.DEFAULT_STREAM_TYPE, Attributes.DEFAULT_SUBTITLES, Attributes.DEFAULT_DURATION, Attributes.LANG);\n  }\n  get mediaStore() {\n    return __privateGet(this, _mediaStore);\n  }\n  set mediaStore(value) {\n    var _a, _b;\n    if (__privateGet(this, _mediaStore)) {\n      (_a = __privateGet(this, _mediaStoreUnsubscribe)) == null ? void 0 : _a.call(this);\n      __privateSet(this, _mediaStoreUnsubscribe, void 0);\n    }\n    __privateSet(this, _mediaStore, value);\n    if (!__privateGet(this, _mediaStore) && !this.hasAttribute(Attributes.NO_DEFAULT_STORE)) {\n      __privateMethod(this, _setupDefaultStore, setupDefaultStore_fn).call(this);\n      return;\n    }\n    __privateSet(this, _mediaStoreUnsubscribe, (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.subscribe(__privateGet(this, _mediaStateCallback)));\n  }\n  get fullscreenElement() {\n    var _a;\n    return (_a = __privateGet(this, _fullscreenElement)) != null ? _a : this;\n  }\n  set fullscreenElement(element) {\n    var _a;\n    if (this.hasAttribute(Attributes.FULLSCREEN_ELEMENT)) {\n      this.removeAttribute(Attributes.FULLSCREEN_ELEMENT);\n    }\n    __privateSet(this, _fullscreenElement, element);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"fullscreenelementchangerequest\",\n      detail: this.fullscreenElement\n    });\n  }\n  get defaultSubtitles() {\n    return getBooleanAttr(this, Attributes.DEFAULT_SUBTITLES);\n  }\n  set defaultSubtitles(value) {\n    setBooleanAttr(this, Attributes.DEFAULT_SUBTITLES, value);\n  }\n  get defaultStreamType() {\n    return getStringAttr(this, Attributes.DEFAULT_STREAM_TYPE);\n  }\n  set defaultStreamType(value) {\n    setStringAttr(this, Attributes.DEFAULT_STREAM_TYPE, value);\n  }\n  get defaultDuration() {\n    return getNumericAttr(this, Attributes.DEFAULT_DURATION);\n  }\n  set defaultDuration(value) {\n    setNumericAttr(this, Attributes.DEFAULT_DURATION, value);\n  }\n  get noHotkeys() {\n    return getBooleanAttr(this, Attributes.NO_HOTKEYS);\n  }\n  set noHotkeys(value) {\n    setBooleanAttr(this, Attributes.NO_HOTKEYS, value);\n  }\n  get keysUsed() {\n    return getStringAttr(this, Attributes.KEYS_USED);\n  }\n  set keysUsed(value) {\n    setStringAttr(this, Attributes.KEYS_USED, value);\n  }\n  get liveEdgeOffset() {\n    return getNumericAttr(this, Attributes.LIVE_EDGE_OFFSET);\n  }\n  set liveEdgeOffset(value) {\n    setNumericAttr(this, Attributes.LIVE_EDGE_OFFSET, value);\n  }\n  get noAutoSeekToLive() {\n    return getBooleanAttr(this, Attributes.NO_AUTO_SEEK_TO_LIVE);\n  }\n  set noAutoSeekToLive(value) {\n    setBooleanAttr(this, Attributes.NO_AUTO_SEEK_TO_LIVE, value);\n  }\n  get noVolumePref() {\n    return getBooleanAttr(this, Attributes.NO_VOLUME_PREF);\n  }\n  set noVolumePref(value) {\n    setBooleanAttr(this, Attributes.NO_VOLUME_PREF, value);\n  }\n  get noSubtitlesLangPref() {\n    return getBooleanAttr(this, Attributes.NO_SUBTITLES_LANG_PREF);\n  }\n  set noSubtitlesLangPref(value) {\n    setBooleanAttr(this, Attributes.NO_SUBTITLES_LANG_PREF, value);\n  }\n  get noDefaultStore() {\n    return getBooleanAttr(this, Attributes.NO_DEFAULT_STORE);\n  }\n  set noDefaultStore(value) {\n    setBooleanAttr(this, Attributes.NO_DEFAULT_STORE, value);\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n    if (attrName === Attributes.NO_HOTKEYS) {\n      if (newValue !== oldValue && newValue === \"\") {\n        if (this.hasAttribute(Attributes.HOTKEYS)) {\n          console.warn(\"Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled.\");\n        }\n        this.disableHotkeys();\n      } else if (newValue !== oldValue && newValue === null) {\n        this.enableHotkeys();\n      }\n    } else if (attrName === Attributes.HOTKEYS) {\n      __privateGet(this, _hotKeys).value = newValue;\n    } else if (attrName === Attributes.DEFAULT_SUBTITLES && newValue !== oldValue) {\n      (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          defaultSubtitles: this.hasAttribute(Attributes.DEFAULT_SUBTITLES)\n        }\n      });\n    } else if (attrName === Attributes.DEFAULT_STREAM_TYPE) {\n      (_c = __privateGet(this, _mediaStore)) == null ? void 0 : _c.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          defaultStreamType: (_b = this.getAttribute(Attributes.DEFAULT_STREAM_TYPE)) != null ? _b : void 0\n        }\n      });\n    } else if (attrName === Attributes.LIVE_EDGE_OFFSET) {\n      (_d = __privateGet(this, _mediaStore)) == null ? void 0 : _d.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          liveEdgeOffset: this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n          seekToLiveOffset: !this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0\n        }\n      });\n    } else if (attrName === Attributes.SEEK_TO_LIVE_OFFSET) {\n      (_e = __privateGet(this, _mediaStore)) == null ? void 0 : _e.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          seekToLiveOffset: this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.SEEK_TO_LIVE_OFFSET) : void 0\n        }\n      });\n    } else if (attrName === Attributes.NO_AUTO_SEEK_TO_LIVE) {\n      (_f = __privateGet(this, _mediaStore)) == null ? void 0 : _f.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          noAutoSeekToLive: this.hasAttribute(Attributes.NO_AUTO_SEEK_TO_LIVE)\n        }\n      });\n    } else if (attrName === Attributes.FULLSCREEN_ELEMENT) {\n      const el = newValue ? (_g = this.getRootNode()) == null ? void 0 : _g.getElementById(newValue) : void 0;\n      __privateSet(this, _fullscreenElement, el);\n      (_h = __privateGet(this, _mediaStore)) == null ? void 0 : _h.dispatch({\n        type: \"fullscreenelementchangerequest\",\n        detail: this.fullscreenElement\n      });\n    } else if (attrName === Attributes.LANG && newValue !== oldValue) {\n      setLanguage(newValue);\n    }\n  }\n  connectedCallback() {\n    var _a, _b;\n    if (!__privateGet(this, _mediaStore) && !this.hasAttribute(Attributes.NO_DEFAULT_STORE)) {\n      __privateMethod(this, _setupDefaultStore, setupDefaultStore_fn).call(this);\n    }\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"documentelementchangerequest\",\n      detail: document\n    });\n    super.connectedCallback();\n    if (__privateGet(this, _mediaStore) && !__privateGet(this, _mediaStoreUnsubscribe)) {\n      __privateSet(this, _mediaStoreUnsubscribe, (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.subscribe(__privateGet(this, _mediaStateCallback)));\n    }\n    this.enableHotkeys();\n  }\n  disconnectedCallback() {\n    var _a, _b, _c, _d;\n    (_a = super.disconnectedCallback) == null ? void 0 : _a.call(this);\n    if (__privateGet(this, _mediaStore)) {\n      (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.dispatch({\n        type: \"documentelementchangerequest\",\n        detail: void 0\n      });\n      (_c = __privateGet(this, _mediaStore)) == null ? void 0 : _c.dispatch({\n        type: MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,\n        detail: false\n      });\n    }\n    if (__privateGet(this, _mediaStoreUnsubscribe)) {\n      (_d = __privateGet(this, _mediaStoreUnsubscribe)) == null ? void 0 : _d.call(this);\n      __privateSet(this, _mediaStoreUnsubscribe, void 0);\n    }\n  }\n  /**\n   * @override\n   * @param {HTMLMediaElement} media\n   */\n  mediaSetCallback(media) {\n    var _a;\n    super.mediaSetCallback(media);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"mediaelementchangerequest\",\n      detail: media\n    });\n    if (!media.hasAttribute(\"tabindex\")) {\n      media.tabIndex = -1;\n    }\n  }\n  /**\n   * @override\n   * @param {HTMLMediaElement} media\n   */\n  mediaUnsetCallback(media) {\n    var _a;\n    super.mediaUnsetCallback(media);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"mediaelementchangerequest\",\n      detail: void 0\n    });\n  }\n  propagateMediaState(stateName, state) {\n    propagateMediaState(this.mediaStateReceivers, stateName, state);\n  }\n  associateElement(element) {\n    if (!element) return;\n    const {\n      associatedElementSubscriptions\n    } = this;\n    if (associatedElementSubscriptions.has(element)) return;\n    const registerMediaStateReceiver = this.registerMediaStateReceiver.bind(this);\n    const unregisterMediaStateReceiver = this.unregisterMediaStateReceiver.bind(this);\n    const unsubscribe = monitorForMediaStateReceivers(element, registerMediaStateReceiver, unregisterMediaStateReceiver);\n    Object.values(MediaUIEvents).forEach(eventName => {\n      element.addEventListener(eventName, __privateGet(this, _mediaStateEventHandler));\n    });\n    associatedElementSubscriptions.set(element, unsubscribe);\n  }\n  unassociateElement(element) {\n    if (!element) return;\n    const {\n      associatedElementSubscriptions\n    } = this;\n    if (!associatedElementSubscriptions.has(element)) return;\n    const unsubscribe = associatedElementSubscriptions.get(element);\n    unsubscribe();\n    associatedElementSubscriptions.delete(element);\n    Object.values(MediaUIEvents).forEach(eventName => {\n      element.removeEventListener(eventName, __privateGet(this, _mediaStateEventHandler));\n    });\n  }\n  registerMediaStateReceiver(el) {\n    if (!el) return;\n    const els = this.mediaStateReceivers;\n    const index = els.indexOf(el);\n    if (index > -1) return;\n    els.push(el);\n    if (__privateGet(this, _mediaStore)) {\n      Object.entries(__privateGet(this, _mediaStore).getState()).forEach(_ref2 => {\n        let [stateName, stateValue] = _ref2;\n        propagateMediaState([el], stateName, stateValue);\n      });\n    }\n  }\n  unregisterMediaStateReceiver(el) {\n    const els = this.mediaStateReceivers;\n    const index = els.indexOf(el);\n    if (index < 0) return;\n    els.splice(index, 1);\n  }\n  enableHotkeys() {\n    this.addEventListener(\"keydown\", __privateMethod(this, _keyDownHandler, keyDownHandler_fn));\n  }\n  disableHotkeys() {\n    this.removeEventListener(\"keydown\", __privateMethod(this, _keyDownHandler, keyDownHandler_fn));\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n  }\n  get hotkeys() {\n    return getStringAttr(this, Attributes.HOTKEYS);\n  }\n  set hotkeys(value) {\n    setStringAttr(this, Attributes.HOTKEYS, value);\n  }\n  keyboardShortcutHandler(e) {\n    var _a, _b, _c, _d, _e;\n    const target = e.target;\n    const keysUsed = ((_c = (_b = (_a = target.getAttribute(Attributes.KEYS_USED)) == null ? void 0 : _a.split(\" \")) != null ? _b : target == null ? void 0 : target.keysUsed) != null ? _c : []).map(key => key === \"Space\" ? \" \" : key).filter(Boolean);\n    if (keysUsed.includes(e.key)) {\n      return;\n    }\n    let eventName, detail, evt;\n    if (__privateGet(this, _hotKeys).contains(`no${e.key.toLowerCase()}`)) return;\n    if (e.key === \" \" && __privateGet(this, _hotKeys).contains(`nospace`)) return;\n    switch (e.key) {\n      case \" \":\n      case \"k\":\n        eventName = __privateGet(this, _mediaStore).getState().mediaPaused ? MediaUIEvents.MEDIA_PLAY_REQUEST : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n        this.dispatchEvent(new globalThis.CustomEvent(eventName, {\n          composed: true,\n          bubbles: true\n        }));\n        break;\n      case \"m\":\n        eventName = this.mediaStore.getState().mediaVolumeLevel === \"off\" ? MediaUIEvents.MEDIA_UNMUTE_REQUEST : MediaUIEvents.MEDIA_MUTE_REQUEST;\n        this.dispatchEvent(new globalThis.CustomEvent(eventName, {\n          composed: true,\n          bubbles: true\n        }));\n        break;\n      case \"f\":\n        eventName = this.mediaStore.getState().mediaIsFullscreen ? MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST : MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST;\n        this.dispatchEvent(new globalThis.CustomEvent(eventName, {\n          composed: true,\n          bubbles: true\n        }));\n        break;\n      case \"c\":\n        this.dispatchEvent(new globalThis.CustomEvent(MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST, {\n          composed: true,\n          bubbles: true\n        }));\n        break;\n      case \"ArrowLeft\":\n        {\n          const offsetValue = this.hasAttribute(Attributes.KEYBOARD_BACKWARD_SEEK_OFFSET) ? +this.getAttribute(Attributes.KEYBOARD_BACKWARD_SEEK_OFFSET) : DEFAULT_SEEK_OFFSET;\n          detail = Math.max(((_d = this.mediaStore.getState().mediaCurrentTime) != null ? _d : 0) - offsetValue, 0);\n          evt = new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n            composed: true,\n            bubbles: true,\n            detail\n          });\n          this.dispatchEvent(evt);\n          break;\n        }\n      case \"ArrowRight\":\n        {\n          const offsetValue = this.hasAttribute(Attributes.KEYBOARD_FORWARD_SEEK_OFFSET) ? +this.getAttribute(Attributes.KEYBOARD_FORWARD_SEEK_OFFSET) : DEFAULT_SEEK_OFFSET;\n          detail = Math.max(((_e = this.mediaStore.getState().mediaCurrentTime) != null ? _e : 0) + offsetValue, 0);\n          evt = new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n            composed: true,\n            bubbles: true,\n            detail\n          });\n          this.dispatchEvent(evt);\n          break;\n        }\n      default:\n        break;\n    }\n  }\n}\n_hotKeys = new WeakMap();\n_fullscreenElement = new WeakMap();\n_mediaStore = new WeakMap();\n_mediaStateCallback = new WeakMap();\n_mediaStoreUnsubscribe = new WeakMap();\n_mediaStateEventHandler = new WeakMap();\n_setupDefaultStore = new WeakSet();\nsetupDefaultStore_fn = function () {\n  var _a;\n  this.mediaStore = createMediaStore({\n    media: this.media,\n    fullscreenElement: this.fullscreenElement,\n    options: {\n      defaultSubtitles: this.hasAttribute(Attributes.DEFAULT_SUBTITLES),\n      defaultDuration: this.hasAttribute(Attributes.DEFAULT_DURATION) ? +this.getAttribute(Attributes.DEFAULT_DURATION) : void 0,\n      defaultStreamType: (/** @type {import('./media-store/state-mediator.js').StreamTypeValue} */\n      (_a = this.getAttribute(Attributes.DEFAULT_STREAM_TYPE)) != null ? _a : void 0),\n      liveEdgeOffset: this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n      seekToLiveOffset: this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.SEEK_TO_LIVE_OFFSET) : this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n      noAutoSeekToLive: this.hasAttribute(Attributes.NO_AUTO_SEEK_TO_LIVE),\n      // NOTE: This wasn't updated if it was changed later. Should it be? (CJP)\n      noVolumePref: this.hasAttribute(Attributes.NO_VOLUME_PREF),\n      noSubtitlesLangPref: this.hasAttribute(Attributes.NO_SUBTITLES_LANG_PREF)\n    }\n  });\n};\n_keyUpHandler = new WeakSet();\nkeyUpHandler_fn = function (e) {\n  const {\n    key\n  } = e;\n  if (!ButtonPressedKeys.includes(key)) {\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n    return;\n  }\n  this.keyboardShortcutHandler(e);\n};\n_keyDownHandler = new WeakSet();\nkeyDownHandler_fn = function (e) {\n  const {\n    metaKey,\n    altKey,\n    key\n  } = e;\n  if (metaKey || altKey || !ButtonPressedKeys.includes(key)) {\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n    return;\n  }\n  if ([\" \", \"ArrowLeft\", \"ArrowRight\"].includes(key) && !(__privateGet(this, _hotKeys).contains(`no${key.toLowerCase()}`) || key === \" \" && __privateGet(this, _hotKeys).contains(\"nospace\"))) {\n    e.preventDefault();\n  }\n  this.addEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn), {\n    once: true\n  });\n};\nconst MEDIA_UI_ATTRIBUTE_NAMES = Object.values(MediaUIAttributes);\nconst MEDIA_UI_PROP_NAMES = Object.values(MediaUIProps);\nconst getMediaUIAttributesFrom = child => {\n  var _a, _b, _c, _d;\n  let {\n    observedAttributes\n  } = child.constructor;\n  if (!observedAttributes && ((_a = child.nodeName) == null ? void 0 : _a.includes(\"-\"))) {\n    globalThis.customElements.upgrade(child);\n    ({\n      observedAttributes\n    } = child.constructor);\n  }\n  const mediaChromeAttributesList = (_d = (_c = (_b = child == null ? void 0 : child.getAttribute) == null ? void 0 : _b.call(child, MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES)) == null ? void 0 : _c.split) == null ? void 0 : _d.call(_c, /\\s+/);\n  if (!Array.isArray(observedAttributes || mediaChromeAttributesList)) return [];\n  return (observedAttributes || mediaChromeAttributesList).filter(attrName => MEDIA_UI_ATTRIBUTE_NAMES.includes(attrName));\n};\nconst hasMediaUIProps = mediaStateReceiverCandidate => {\n  var _a, _b;\n  if (((_a = mediaStateReceiverCandidate.nodeName) == null ? void 0 : _a.includes(\"-\")) && !!globalThis.customElements.get((_b = mediaStateReceiverCandidate.nodeName) == null ? void 0 : _b.toLowerCase()) && !(mediaStateReceiverCandidate instanceof globalThis.customElements.get(mediaStateReceiverCandidate.nodeName.toLowerCase()))) {\n    globalThis.customElements.upgrade(mediaStateReceiverCandidate);\n  }\n  return MEDIA_UI_PROP_NAMES.some(propName => propName in mediaStateReceiverCandidate);\n};\nconst isMediaStateReceiver = child => {\n  return hasMediaUIProps(child) || !!getMediaUIAttributesFrom(child).length;\n};\nconst serializeTuple = tuple => {\n  var _a;\n  return (_a = tuple == null ? void 0 : tuple.join) == null ? void 0 : _a.call(tuple, \":\");\n};\nconst CustomAttrSerializer = {\n  [MediaUIAttributes.MEDIA_SUBTITLES_LIST]: stringifyTextTrackList,\n  [MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]: stringifyTextTrackList,\n  [MediaUIAttributes.MEDIA_SEEKABLE]: serializeTuple,\n  [MediaUIAttributes.MEDIA_BUFFERED]: tuples => tuples == null ? void 0 : tuples.map(serializeTuple).join(\" \"),\n  [MediaUIAttributes.MEDIA_PREVIEW_COORDS]: coords => coords == null ? void 0 : coords.join(\" \"),\n  [MediaUIAttributes.MEDIA_RENDITION_LIST]: stringifyRenditionList,\n  [MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST]: stringifyAudioTrackList\n};\nconst setAttr = async (child, attrName, attrValue) => {\n  var _a, _b;\n  if (!child.isConnected) {\n    await delay(0);\n  }\n  if (typeof attrValue === \"boolean\" || attrValue == null) {\n    return setBooleanAttr(child, attrName, attrValue);\n  }\n  if (typeof attrValue === \"number\") {\n    return setNumericAttr(child, attrName, attrValue);\n  }\n  if (typeof attrValue === \"string\") {\n    return setStringAttr(child, attrName, attrValue);\n  }\n  if (Array.isArray(attrValue) && !attrValue.length) {\n    return child.removeAttribute(attrName);\n  }\n  const val = (_b = (_a = CustomAttrSerializer[attrName]) == null ? void 0 : _a.call(CustomAttrSerializer, attrValue)) != null ? _b : attrValue;\n  return child.setAttribute(attrName, val);\n};\nconst isMediaSlotElementDescendant = el => {\n  var _a;\n  return !!((_a = el.closest) == null ? void 0 : _a.call(el, '*[slot=\"media\"]'));\n};\nconst traverseForMediaStateReceivers = (rootNode, mediaStateReceiverCallback) => {\n  if (isMediaSlotElementDescendant(rootNode)) {\n    return;\n  }\n  const traverseForMediaStateReceiversSync = (rootNode2, mediaStateReceiverCallback2) => {\n    var _a, _b;\n    if (isMediaStateReceiver(rootNode2)) {\n      mediaStateReceiverCallback2(rootNode2);\n    }\n    const {\n      children = []\n    } = rootNode2 != null ? rootNode2 : {};\n    const shadowChildren = (_b = (_a = rootNode2 == null ? void 0 : rootNode2.shadowRoot) == null ? void 0 : _a.children) != null ? _b : [];\n    const allChildren = [...children, ...shadowChildren];\n    allChildren.forEach(child => traverseForMediaStateReceivers(child, mediaStateReceiverCallback2));\n  };\n  const name = rootNode == null ? void 0 : rootNode.nodeName.toLowerCase();\n  if (name.includes(\"-\") && !isMediaStateReceiver(rootNode)) {\n    globalThis.customElements.whenDefined(name).then(() => {\n      traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n    });\n    return;\n  }\n  traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n};\nconst propagateMediaState = (els, stateName, val) => {\n  els.forEach(el => {\n    if (stateName in el) {\n      el[stateName] = val;\n      return;\n    }\n    const relevantAttrs = getMediaUIAttributesFrom(el);\n    const attrName = stateName.toLowerCase();\n    if (!relevantAttrs.includes(attrName)) return;\n    setAttr(el, attrName, val);\n  });\n};\nconst monitorForMediaStateReceivers = (rootNode, registerMediaStateReceiver, unregisterMediaStateReceiver) => {\n  traverseForMediaStateReceivers(rootNode, registerMediaStateReceiver);\n  const registerMediaStateReceiverHandler = evt => {\n    var _a;\n    const el = (_a = evt == null ? void 0 : evt.composedPath()[0]) != null ? _a : evt.target;\n    registerMediaStateReceiver(el);\n  };\n  const unregisterMediaStateReceiverHandler = evt => {\n    var _a;\n    const el = (_a = evt == null ? void 0 : evt.composedPath()[0]) != null ? _a : evt.target;\n    unregisterMediaStateReceiver(el);\n  };\n  rootNode.addEventListener(MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER, registerMediaStateReceiverHandler);\n  rootNode.addEventListener(MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER, unregisterMediaStateReceiverHandler);\n  const mutationCallback = mutationsList => {\n    mutationsList.forEach(mutationRecord => {\n      const {\n        addedNodes = [],\n        removedNodes = [],\n        type,\n        target,\n        attributeName\n      } = mutationRecord;\n      if (type === \"childList\") {\n        Array.prototype.forEach.call(addedNodes, node => traverseForMediaStateReceivers(node, registerMediaStateReceiver));\n        Array.prototype.forEach.call(removedNodes, node => traverseForMediaStateReceivers(node, unregisterMediaStateReceiver));\n      } else if (type === \"attributes\" && attributeName === MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES) {\n        if (isMediaStateReceiver(target)) {\n          registerMediaStateReceiver(target);\n        } else {\n          unregisterMediaStateReceiver(target);\n        }\n      }\n    });\n  };\n  let prevSlotted = [];\n  const slotChangeHandler = event => {\n    const slotEl = event.target;\n    if (slotEl.name === \"media\") return;\n    prevSlotted.forEach(node => traverseForMediaStateReceivers(node, unregisterMediaStateReceiver));\n    prevSlotted = [...slotEl.assignedElements({\n      flatten: true\n    })];\n    prevSlotted.forEach(node => traverseForMediaStateReceivers(node, registerMediaStateReceiver));\n  };\n  rootNode.addEventListener(\"slotchange\", slotChangeHandler);\n  const observer = new MutationObserver(mutationCallback);\n  observer.observe(rootNode, {\n    childList: true,\n    attributes: true,\n    subtree: true\n  });\n  const unsubscribe = () => {\n    traverseForMediaStateReceivers(rootNode, unregisterMediaStateReceiver);\n    rootNode.removeEventListener(\"slotchange\", slotChangeHandler);\n    observer.disconnect();\n    rootNode.removeEventListener(MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER, registerMediaStateReceiverHandler);\n    rootNode.removeEventListener(MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER, unregisterMediaStateReceiverHandler);\n  };\n  return unsubscribe;\n};\nif (!globalThis.customElements.get(\"media-controller\")) {\n  globalThis.customElements.define(\"media-controller\", MediaController);\n}\nvar media_controller_default = MediaController;\nexport { Attributes, MediaController, media_controller_default as default };","map":{"version":3,"names":["__accessCheck","obj","member","msg","has","TypeError","__privateGet","getter","call","get","__privateAdd","value","WeakSet","add","set","__privateSet","setter","__privateMethod","method","_hotKeys","_fullscreenElement","_mediaStore","_mediaStateCallback","_mediaStoreUnsubscribe","_mediaStateEventHandler","_setupDefaultStore","setupDefaultStore_fn","_keyUpHandler","keyUpHandler_fn","_keyDownHandler","keyDownHandler_fn","MediaContainer","document","globalThis","AttributeTokenList","delay","stringifyRenditionList","stringifyAudioTrackList","stringifyTextTrackList","MediaUIEvents","MediaUIAttributes","MediaStateReceiverAttributes","AttributeToStateChangeEventMap","MediaUIProps","getBooleanAttr","getNumericAttr","getStringAttr","setBooleanAttr","setNumericAttr","setStringAttr","createMediaStore","setLanguage","ButtonPressedKeys","DEFAULT_SEEK_OFFSET","Attributes","DEFAULT_SUBTITLES","DEFAULT_STREAM_TYPE","DEFAULT_DURATION","FULLSCREEN_ELEMENT","HOTKEYS","KEYS_USED","LIVE_EDGE_OFFSET","SEEK_TO_LIVE_OFFSET","NO_AUTO_SEEK_TO_LIVE","NO_HOTKEYS","NO_VOLUME_PREF","NO_SUBTITLES_LANG_PREF","NO_DEFAULT_STORE","KEYBOARD_FORWARD_SEEK_OFFSET","KEYBOARD_BACKWARD_SEEK_OFFSET","LANG","MediaController","constructor","mediaStateReceivers","associatedElementSubscriptions","Map","event","_a","dispatch","associateElement","prevState","nextState","Object","entries","forEach","_ref","stateName","stateValue","propagateMediaState","attrName","toLowerCase","evt","CustomEvent","composed","detail","dispatchEvent","enableHotkeys","observedAttributes","concat","mediaStore","_b","hasAttribute","subscribe","fullscreenElement","element","removeAttribute","type","defaultSubtitles","defaultStreamType","defaultDuration","noHotkeys","keysUsed","liveEdgeOffset","noAutoSeekToLive","noVolumePref","noSubtitlesLangPref","noDefaultStore","attributeChangedCallback","oldValue","newValue","_c","_d","_e","_f","_g","_h","console","warn","disableHotkeys","getAttribute","seekToLiveOffset","el","getRootNode","getElementById","connectedCallback","disconnectedCallback","MEDIA_TOGGLE_SUBTITLES_REQUEST","mediaSetCallback","media","tabIndex","mediaUnsetCallback","state","registerMediaStateReceiver","bind","unregisterMediaStateReceiver","unsubscribe","monitorForMediaStateReceivers","values","eventName","addEventListener","unassociateElement","delete","removeEventListener","els","index","indexOf","push","getState","_ref2","splice","hotkeys","keyboardShortcutHandler","e","target","split","map","key","filter","Boolean","includes","contains","mediaPaused","MEDIA_PLAY_REQUEST","MEDIA_PAUSE_REQUEST","bubbles","mediaVolumeLevel","MEDIA_UNMUTE_REQUEST","MEDIA_MUTE_REQUEST","mediaIsFullscreen","MEDIA_EXIT_FULLSCREEN_REQUEST","MEDIA_ENTER_FULLSCREEN_REQUEST","offsetValue","Math","max","mediaCurrentTime","MEDIA_SEEK_REQUEST","WeakMap","options","metaKey","altKey","preventDefault","once","MEDIA_UI_ATTRIBUTE_NAMES","MEDIA_UI_PROP_NAMES","getMediaUIAttributesFrom","child","nodeName","customElements","upgrade","mediaChromeAttributesList","MEDIA_CHROME_ATTRIBUTES","Array","isArray","hasMediaUIProps","mediaStateReceiverCandidate","some","propName","isMediaStateReceiver","length","serializeTuple","tuple","join","CustomAttrSerializer","MEDIA_SUBTITLES_LIST","MEDIA_SUBTITLES_SHOWING","MEDIA_SEEKABLE","MEDIA_BUFFERED","tuples","MEDIA_PREVIEW_COORDS","coords","MEDIA_RENDITION_LIST","MEDIA_AUDIO_TRACK_LIST","setAttr","attrValue","isConnected","val","setAttribute","isMediaSlotElementDescendant","closest","traverseForMediaStateReceivers","rootNode","mediaStateReceiverCallback","traverseForMediaStateReceiversSync","rootNode2","mediaStateReceiverCallback2","children","shadowChildren","shadowRoot","allChildren","name","whenDefined","then","relevantAttrs","registerMediaStateReceiverHandler","composedPath","unregisterMediaStateReceiverHandler","REGISTER_MEDIA_STATE_RECEIVER","UNREGISTER_MEDIA_STATE_RECEIVER","mutationCallback","mutationsList","mutationRecord","addedNodes","removedNodes","attributeName","prototype","node","prevSlotted","slotChangeHandler","slotEl","assignedElements","flatten","observer","MutationObserver","observe","childList","attributes","subtree","disconnect","define","media_controller_default","default"],"sources":["/Users/monawiebkeurban/Documents/portfolio/node_modules/media-chrome/dist/media-controller.js"],"sourcesContent":["var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _hotKeys, _fullscreenElement, _mediaStore, _mediaStateCallback, _mediaStoreUnsubscribe, _mediaStateEventHandler, _setupDefaultStore, setupDefaultStore_fn, _keyUpHandler, keyUpHandler_fn, _keyDownHandler, keyDownHandler_fn;\nimport { MediaContainer } from \"./media-container.js\";\nimport { document, globalThis } from \"./utils/server-safe-globals.js\";\nimport { AttributeTokenList } from \"./utils/attribute-token-list.js\";\nimport {\n  delay,\n  stringifyRenditionList,\n  stringifyAudioTrackList\n} from \"./utils/utils.js\";\nimport { stringifyTextTrackList } from \"./utils/captions.js\";\nimport {\n  MediaUIEvents,\n  MediaUIAttributes,\n  MediaStateReceiverAttributes,\n  AttributeToStateChangeEventMap,\n  MediaUIProps\n} from \"./constants.js\";\nimport {\n  getBooleanAttr,\n  getNumericAttr,\n  getStringAttr,\n  setBooleanAttr,\n  setNumericAttr,\n  setStringAttr\n} from \"./utils/element-utils.js\";\nimport { createMediaStore } from \"./media-store/media-store.js\";\nimport { setLanguage } from \"./utils/i18n.js\";\nconst ButtonPressedKeys = [\n  \"ArrowLeft\",\n  \"ArrowRight\",\n  \"Enter\",\n  \" \",\n  \"f\",\n  \"m\",\n  \"k\",\n  \"c\"\n];\nconst DEFAULT_SEEK_OFFSET = 10;\nconst Attributes = {\n  DEFAULT_SUBTITLES: \"defaultsubtitles\",\n  DEFAULT_STREAM_TYPE: \"defaultstreamtype\",\n  DEFAULT_DURATION: \"defaultduration\",\n  FULLSCREEN_ELEMENT: \"fullscreenelement\",\n  HOTKEYS: \"hotkeys\",\n  KEYS_USED: \"keysused\",\n  LIVE_EDGE_OFFSET: \"liveedgeoffset\",\n  SEEK_TO_LIVE_OFFSET: \"seektoliveoffset\",\n  NO_AUTO_SEEK_TO_LIVE: \"noautoseektolive\",\n  NO_HOTKEYS: \"nohotkeys\",\n  NO_VOLUME_PREF: \"novolumepref\",\n  NO_SUBTITLES_LANG_PREF: \"nosubtitleslangpref\",\n  NO_DEFAULT_STORE: \"nodefaultstore\",\n  KEYBOARD_FORWARD_SEEK_OFFSET: \"keyboardforwardseekoffset\",\n  KEYBOARD_BACKWARD_SEEK_OFFSET: \"keyboardbackwardseekoffset\",\n  LANG: \"lang\"\n};\nclass MediaController extends MediaContainer {\n  constructor() {\n    super();\n    __privateAdd(this, _setupDefaultStore);\n    __privateAdd(this, _keyUpHandler);\n    __privateAdd(this, _keyDownHandler);\n    this.mediaStateReceivers = [];\n    this.associatedElementSubscriptions = /* @__PURE__ */ new Map();\n    __privateAdd(this, _hotKeys, new AttributeTokenList(this, Attributes.HOTKEYS));\n    __privateAdd(this, _fullscreenElement, void 0);\n    __privateAdd(this, _mediaStore, void 0);\n    __privateAdd(this, _mediaStateCallback, void 0);\n    __privateAdd(this, _mediaStoreUnsubscribe, void 0);\n    __privateAdd(this, _mediaStateEventHandler, (event) => {\n      var _a;\n      (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch(event);\n    });\n    this.associateElement(this);\n    let prevState = {};\n    __privateSet(this, _mediaStateCallback, (nextState) => {\n      Object.entries(nextState).forEach(([stateName, stateValue]) => {\n        if (stateName in prevState && prevState[stateName] === stateValue)\n          return;\n        this.propagateMediaState(stateName, stateValue);\n        const attrName = stateName.toLowerCase();\n        const evt = new globalThis.CustomEvent(\n          AttributeToStateChangeEventMap[attrName],\n          { composed: true, detail: stateValue }\n        );\n        this.dispatchEvent(evt);\n      });\n      prevState = nextState;\n    });\n    this.enableHotkeys();\n  }\n  static get observedAttributes() {\n    return super.observedAttributes.concat(\n      Attributes.NO_HOTKEYS,\n      Attributes.HOTKEYS,\n      Attributes.DEFAULT_STREAM_TYPE,\n      Attributes.DEFAULT_SUBTITLES,\n      Attributes.DEFAULT_DURATION,\n      Attributes.LANG\n    );\n  }\n  get mediaStore() {\n    return __privateGet(this, _mediaStore);\n  }\n  set mediaStore(value) {\n    var _a, _b;\n    if (__privateGet(this, _mediaStore)) {\n      (_a = __privateGet(this, _mediaStoreUnsubscribe)) == null ? void 0 : _a.call(this);\n      __privateSet(this, _mediaStoreUnsubscribe, void 0);\n    }\n    __privateSet(this, _mediaStore, value);\n    if (!__privateGet(this, _mediaStore) && !this.hasAttribute(Attributes.NO_DEFAULT_STORE)) {\n      __privateMethod(this, _setupDefaultStore, setupDefaultStore_fn).call(this);\n      return;\n    }\n    __privateSet(this, _mediaStoreUnsubscribe, (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.subscribe(\n      __privateGet(this, _mediaStateCallback)\n    ));\n  }\n  get fullscreenElement() {\n    var _a;\n    return (_a = __privateGet(this, _fullscreenElement)) != null ? _a : this;\n  }\n  set fullscreenElement(element) {\n    var _a;\n    if (this.hasAttribute(Attributes.FULLSCREEN_ELEMENT)) {\n      this.removeAttribute(Attributes.FULLSCREEN_ELEMENT);\n    }\n    __privateSet(this, _fullscreenElement, element);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"fullscreenelementchangerequest\",\n      detail: this.fullscreenElement\n    });\n  }\n  get defaultSubtitles() {\n    return getBooleanAttr(this, Attributes.DEFAULT_SUBTITLES);\n  }\n  set defaultSubtitles(value) {\n    setBooleanAttr(this, Attributes.DEFAULT_SUBTITLES, value);\n  }\n  get defaultStreamType() {\n    return getStringAttr(this, Attributes.DEFAULT_STREAM_TYPE);\n  }\n  set defaultStreamType(value) {\n    setStringAttr(this, Attributes.DEFAULT_STREAM_TYPE, value);\n  }\n  get defaultDuration() {\n    return getNumericAttr(this, Attributes.DEFAULT_DURATION);\n  }\n  set defaultDuration(value) {\n    setNumericAttr(this, Attributes.DEFAULT_DURATION, value);\n  }\n  get noHotkeys() {\n    return getBooleanAttr(this, Attributes.NO_HOTKEYS);\n  }\n  set noHotkeys(value) {\n    setBooleanAttr(this, Attributes.NO_HOTKEYS, value);\n  }\n  get keysUsed() {\n    return getStringAttr(this, Attributes.KEYS_USED);\n  }\n  set keysUsed(value) {\n    setStringAttr(this, Attributes.KEYS_USED, value);\n  }\n  get liveEdgeOffset() {\n    return getNumericAttr(this, Attributes.LIVE_EDGE_OFFSET);\n  }\n  set liveEdgeOffset(value) {\n    setNumericAttr(this, Attributes.LIVE_EDGE_OFFSET, value);\n  }\n  get noAutoSeekToLive() {\n    return getBooleanAttr(this, Attributes.NO_AUTO_SEEK_TO_LIVE);\n  }\n  set noAutoSeekToLive(value) {\n    setBooleanAttr(this, Attributes.NO_AUTO_SEEK_TO_LIVE, value);\n  }\n  get noVolumePref() {\n    return getBooleanAttr(this, Attributes.NO_VOLUME_PREF);\n  }\n  set noVolumePref(value) {\n    setBooleanAttr(this, Attributes.NO_VOLUME_PREF, value);\n  }\n  get noSubtitlesLangPref() {\n    return getBooleanAttr(this, Attributes.NO_SUBTITLES_LANG_PREF);\n  }\n  set noSubtitlesLangPref(value) {\n    setBooleanAttr(this, Attributes.NO_SUBTITLES_LANG_PREF, value);\n  }\n  get noDefaultStore() {\n    return getBooleanAttr(this, Attributes.NO_DEFAULT_STORE);\n  }\n  set noDefaultStore(value) {\n    setBooleanAttr(this, Attributes.NO_DEFAULT_STORE, value);\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n    if (attrName === Attributes.NO_HOTKEYS) {\n      if (newValue !== oldValue && newValue === \"\") {\n        if (this.hasAttribute(Attributes.HOTKEYS)) {\n          console.warn(\n            \"Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled.\"\n          );\n        }\n        this.disableHotkeys();\n      } else if (newValue !== oldValue && newValue === null) {\n        this.enableHotkeys();\n      }\n    } else if (attrName === Attributes.HOTKEYS) {\n      __privateGet(this, _hotKeys).value = newValue;\n    } else if (attrName === Attributes.DEFAULT_SUBTITLES && newValue !== oldValue) {\n      (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          defaultSubtitles: this.hasAttribute(Attributes.DEFAULT_SUBTITLES)\n        }\n      });\n    } else if (attrName === Attributes.DEFAULT_STREAM_TYPE) {\n      (_c = __privateGet(this, _mediaStore)) == null ? void 0 : _c.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          defaultStreamType: (_b = this.getAttribute(Attributes.DEFAULT_STREAM_TYPE)) != null ? _b : void 0\n        }\n      });\n    } else if (attrName === Attributes.LIVE_EDGE_OFFSET) {\n      (_d = __privateGet(this, _mediaStore)) == null ? void 0 : _d.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          liveEdgeOffset: this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n          seekToLiveOffset: !this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0\n        }\n      });\n    } else if (attrName === Attributes.SEEK_TO_LIVE_OFFSET) {\n      (_e = __privateGet(this, _mediaStore)) == null ? void 0 : _e.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          seekToLiveOffset: this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.SEEK_TO_LIVE_OFFSET) : void 0\n        }\n      });\n    } else if (attrName === Attributes.NO_AUTO_SEEK_TO_LIVE) {\n      (_f = __privateGet(this, _mediaStore)) == null ? void 0 : _f.dispatch({\n        type: \"optionschangerequest\",\n        detail: {\n          noAutoSeekToLive: this.hasAttribute(Attributes.NO_AUTO_SEEK_TO_LIVE)\n        }\n      });\n    } else if (attrName === Attributes.FULLSCREEN_ELEMENT) {\n      const el = newValue ? (_g = this.getRootNode()) == null ? void 0 : _g.getElementById(newValue) : void 0;\n      __privateSet(this, _fullscreenElement, el);\n      (_h = __privateGet(this, _mediaStore)) == null ? void 0 : _h.dispatch({\n        type: \"fullscreenelementchangerequest\",\n        detail: this.fullscreenElement\n      });\n    } else if (attrName === Attributes.LANG && newValue !== oldValue) {\n      setLanguage(newValue);\n    }\n  }\n  connectedCallback() {\n    var _a, _b;\n    if (!__privateGet(this, _mediaStore) && !this.hasAttribute(Attributes.NO_DEFAULT_STORE)) {\n      __privateMethod(this, _setupDefaultStore, setupDefaultStore_fn).call(this);\n    }\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"documentelementchangerequest\",\n      detail: document\n    });\n    super.connectedCallback();\n    if (__privateGet(this, _mediaStore) && !__privateGet(this, _mediaStoreUnsubscribe)) {\n      __privateSet(this, _mediaStoreUnsubscribe, (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.subscribe(\n        __privateGet(this, _mediaStateCallback)\n      ));\n    }\n    this.enableHotkeys();\n  }\n  disconnectedCallback() {\n    var _a, _b, _c, _d;\n    (_a = super.disconnectedCallback) == null ? void 0 : _a.call(this);\n    if (__privateGet(this, _mediaStore)) {\n      (_b = __privateGet(this, _mediaStore)) == null ? void 0 : _b.dispatch({\n        type: \"documentelementchangerequest\",\n        detail: void 0\n      });\n      (_c = __privateGet(this, _mediaStore)) == null ? void 0 : _c.dispatch({\n        type: MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,\n        detail: false\n      });\n    }\n    if (__privateGet(this, _mediaStoreUnsubscribe)) {\n      (_d = __privateGet(this, _mediaStoreUnsubscribe)) == null ? void 0 : _d.call(this);\n      __privateSet(this, _mediaStoreUnsubscribe, void 0);\n    }\n  }\n  /**\n   * @override\n   * @param {HTMLMediaElement} media\n   */\n  mediaSetCallback(media) {\n    var _a;\n    super.mediaSetCallback(media);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"mediaelementchangerequest\",\n      detail: media\n    });\n    if (!media.hasAttribute(\"tabindex\")) {\n      media.tabIndex = -1;\n    }\n  }\n  /**\n   * @override\n   * @param {HTMLMediaElement} media\n   */\n  mediaUnsetCallback(media) {\n    var _a;\n    super.mediaUnsetCallback(media);\n    (_a = __privateGet(this, _mediaStore)) == null ? void 0 : _a.dispatch({\n      type: \"mediaelementchangerequest\",\n      detail: void 0\n    });\n  }\n  propagateMediaState(stateName, state) {\n    propagateMediaState(this.mediaStateReceivers, stateName, state);\n  }\n  associateElement(element) {\n    if (!element)\n      return;\n    const { associatedElementSubscriptions } = this;\n    if (associatedElementSubscriptions.has(element))\n      return;\n    const registerMediaStateReceiver = this.registerMediaStateReceiver.bind(this);\n    const unregisterMediaStateReceiver = this.unregisterMediaStateReceiver.bind(this);\n    const unsubscribe = monitorForMediaStateReceivers(\n      element,\n      registerMediaStateReceiver,\n      unregisterMediaStateReceiver\n    );\n    Object.values(MediaUIEvents).forEach((eventName) => {\n      element.addEventListener(eventName, __privateGet(this, _mediaStateEventHandler));\n    });\n    associatedElementSubscriptions.set(element, unsubscribe);\n  }\n  unassociateElement(element) {\n    if (!element)\n      return;\n    const { associatedElementSubscriptions } = this;\n    if (!associatedElementSubscriptions.has(element))\n      return;\n    const unsubscribe = associatedElementSubscriptions.get(element);\n    unsubscribe();\n    associatedElementSubscriptions.delete(element);\n    Object.values(MediaUIEvents).forEach((eventName) => {\n      element.removeEventListener(eventName, __privateGet(this, _mediaStateEventHandler));\n    });\n  }\n  registerMediaStateReceiver(el) {\n    if (!el)\n      return;\n    const els = this.mediaStateReceivers;\n    const index = els.indexOf(el);\n    if (index > -1)\n      return;\n    els.push(el);\n    if (__privateGet(this, _mediaStore)) {\n      Object.entries(__privateGet(this, _mediaStore).getState()).forEach(\n        ([stateName, stateValue]) => {\n          propagateMediaState([el], stateName, stateValue);\n        }\n      );\n    }\n  }\n  unregisterMediaStateReceiver(el) {\n    const els = this.mediaStateReceivers;\n    const index = els.indexOf(el);\n    if (index < 0)\n      return;\n    els.splice(index, 1);\n  }\n  enableHotkeys() {\n    this.addEventListener(\"keydown\", __privateMethod(this, _keyDownHandler, keyDownHandler_fn));\n  }\n  disableHotkeys() {\n    this.removeEventListener(\"keydown\", __privateMethod(this, _keyDownHandler, keyDownHandler_fn));\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n  }\n  get hotkeys() {\n    return getStringAttr(this, Attributes.HOTKEYS);\n  }\n  set hotkeys(value) {\n    setStringAttr(this, Attributes.HOTKEYS, value);\n  }\n  keyboardShortcutHandler(e) {\n    var _a, _b, _c, _d, _e;\n    const target = e.target;\n    const keysUsed = ((_c = (_b = (_a = target.getAttribute(Attributes.KEYS_USED)) == null ? void 0 : _a.split(\" \")) != null ? _b : target == null ? void 0 : target.keysUsed) != null ? _c : []).map((key) => key === \"Space\" ? \" \" : key).filter(Boolean);\n    if (keysUsed.includes(e.key)) {\n      return;\n    }\n    let eventName, detail, evt;\n    if (__privateGet(this, _hotKeys).contains(`no${e.key.toLowerCase()}`))\n      return;\n    if (e.key === \" \" && __privateGet(this, _hotKeys).contains(`nospace`))\n      return;\n    switch (e.key) {\n      case \" \":\n      case \"k\":\n        eventName = __privateGet(this, _mediaStore).getState().mediaPaused ? MediaUIEvents.MEDIA_PLAY_REQUEST : MediaUIEvents.MEDIA_PAUSE_REQUEST;\n        this.dispatchEvent(\n          new globalThis.CustomEvent(eventName, {\n            composed: true,\n            bubbles: true\n          })\n        );\n        break;\n      case \"m\":\n        eventName = this.mediaStore.getState().mediaVolumeLevel === \"off\" ? MediaUIEvents.MEDIA_UNMUTE_REQUEST : MediaUIEvents.MEDIA_MUTE_REQUEST;\n        this.dispatchEvent(\n          new globalThis.CustomEvent(eventName, {\n            composed: true,\n            bubbles: true\n          })\n        );\n        break;\n      case \"f\":\n        eventName = this.mediaStore.getState().mediaIsFullscreen ? MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST : MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST;\n        this.dispatchEvent(\n          new globalThis.CustomEvent(eventName, {\n            composed: true,\n            bubbles: true\n          })\n        );\n        break;\n      case \"c\":\n        this.dispatchEvent(\n          new globalThis.CustomEvent(\n            MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST,\n            { composed: true, bubbles: true }\n          )\n        );\n        break;\n      case \"ArrowLeft\": {\n        const offsetValue = this.hasAttribute(\n          Attributes.KEYBOARD_BACKWARD_SEEK_OFFSET\n        ) ? +this.getAttribute(Attributes.KEYBOARD_BACKWARD_SEEK_OFFSET) : DEFAULT_SEEK_OFFSET;\n        detail = Math.max(\n          ((_d = this.mediaStore.getState().mediaCurrentTime) != null ? _d : 0) - offsetValue,\n          0\n        );\n        evt = new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n          composed: true,\n          bubbles: true,\n          detail\n        });\n        this.dispatchEvent(evt);\n        break;\n      }\n      case \"ArrowRight\": {\n        const offsetValue = this.hasAttribute(\n          Attributes.KEYBOARD_FORWARD_SEEK_OFFSET\n        ) ? +this.getAttribute(Attributes.KEYBOARD_FORWARD_SEEK_OFFSET) : DEFAULT_SEEK_OFFSET;\n        detail = Math.max(\n          ((_e = this.mediaStore.getState().mediaCurrentTime) != null ? _e : 0) + offsetValue,\n          0\n        );\n        evt = new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n          composed: true,\n          bubbles: true,\n          detail\n        });\n        this.dispatchEvent(evt);\n        break;\n      }\n      default:\n        break;\n    }\n  }\n}\n_hotKeys = new WeakMap();\n_fullscreenElement = new WeakMap();\n_mediaStore = new WeakMap();\n_mediaStateCallback = new WeakMap();\n_mediaStoreUnsubscribe = new WeakMap();\n_mediaStateEventHandler = new WeakMap();\n_setupDefaultStore = new WeakSet();\nsetupDefaultStore_fn = function() {\n  var _a;\n  this.mediaStore = createMediaStore({\n    media: this.media,\n    fullscreenElement: this.fullscreenElement,\n    options: {\n      defaultSubtitles: this.hasAttribute(Attributes.DEFAULT_SUBTITLES),\n      defaultDuration: this.hasAttribute(Attributes.DEFAULT_DURATION) ? +this.getAttribute(Attributes.DEFAULT_DURATION) : void 0,\n      defaultStreamType: (\n        /** @type {import('./media-store/state-mediator.js').StreamTypeValue} */\n        (_a = this.getAttribute(\n          Attributes.DEFAULT_STREAM_TYPE\n        )) != null ? _a : void 0\n      ),\n      liveEdgeOffset: this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n      seekToLiveOffset: this.hasAttribute(Attributes.SEEK_TO_LIVE_OFFSET) ? +this.getAttribute(Attributes.SEEK_TO_LIVE_OFFSET) : this.hasAttribute(Attributes.LIVE_EDGE_OFFSET) ? +this.getAttribute(Attributes.LIVE_EDGE_OFFSET) : void 0,\n      noAutoSeekToLive: this.hasAttribute(Attributes.NO_AUTO_SEEK_TO_LIVE),\n      // NOTE: This wasn't updated if it was changed later. Should it be? (CJP)\n      noVolumePref: this.hasAttribute(Attributes.NO_VOLUME_PREF),\n      noSubtitlesLangPref: this.hasAttribute(\n        Attributes.NO_SUBTITLES_LANG_PREF\n      )\n    }\n  });\n};\n_keyUpHandler = new WeakSet();\nkeyUpHandler_fn = function(e) {\n  const { key } = e;\n  if (!ButtonPressedKeys.includes(key)) {\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n    return;\n  }\n  this.keyboardShortcutHandler(e);\n};\n_keyDownHandler = new WeakSet();\nkeyDownHandler_fn = function(e) {\n  const { metaKey, altKey, key } = e;\n  if (metaKey || altKey || !ButtonPressedKeys.includes(key)) {\n    this.removeEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn));\n    return;\n  }\n  if ([\" \", \"ArrowLeft\", \"ArrowRight\"].includes(key) && !(__privateGet(this, _hotKeys).contains(`no${key.toLowerCase()}`) || key === \" \" && __privateGet(this, _hotKeys).contains(\"nospace\"))) {\n    e.preventDefault();\n  }\n  this.addEventListener(\"keyup\", __privateMethod(this, _keyUpHandler, keyUpHandler_fn), { once: true });\n};\nconst MEDIA_UI_ATTRIBUTE_NAMES = Object.values(MediaUIAttributes);\nconst MEDIA_UI_PROP_NAMES = Object.values(MediaUIProps);\nconst getMediaUIAttributesFrom = (child) => {\n  var _a, _b, _c, _d;\n  let { observedAttributes } = child.constructor;\n  if (!observedAttributes && ((_a = child.nodeName) == null ? void 0 : _a.includes(\"-\"))) {\n    globalThis.customElements.upgrade(child);\n    ({ observedAttributes } = child.constructor);\n  }\n  const mediaChromeAttributesList = (_d = (_c = (_b = child == null ? void 0 : child.getAttribute) == null ? void 0 : _b.call(child, MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES)) == null ? void 0 : _c.split) == null ? void 0 : _d.call(_c, /\\s+/);\n  if (!Array.isArray(observedAttributes || mediaChromeAttributesList))\n    return [];\n  return (observedAttributes || mediaChromeAttributesList).filter(\n    (attrName) => MEDIA_UI_ATTRIBUTE_NAMES.includes(attrName)\n  );\n};\nconst hasMediaUIProps = (mediaStateReceiverCandidate) => {\n  var _a, _b;\n  if (((_a = mediaStateReceiverCandidate.nodeName) == null ? void 0 : _a.includes(\"-\")) && !!globalThis.customElements.get(\n    (_b = mediaStateReceiverCandidate.nodeName) == null ? void 0 : _b.toLowerCase()\n  ) && !(mediaStateReceiverCandidate instanceof globalThis.customElements.get(\n    mediaStateReceiverCandidate.nodeName.toLowerCase()\n  ))) {\n    globalThis.customElements.upgrade(mediaStateReceiverCandidate);\n  }\n  return MEDIA_UI_PROP_NAMES.some(\n    (propName) => propName in mediaStateReceiverCandidate\n  );\n};\nconst isMediaStateReceiver = (child) => {\n  return hasMediaUIProps(child) || !!getMediaUIAttributesFrom(child).length;\n};\nconst serializeTuple = (tuple) => {\n  var _a;\n  return (_a = tuple == null ? void 0 : tuple.join) == null ? void 0 : _a.call(tuple, \":\");\n};\nconst CustomAttrSerializer = {\n  [MediaUIAttributes.MEDIA_SUBTITLES_LIST]: stringifyTextTrackList,\n  [MediaUIAttributes.MEDIA_SUBTITLES_SHOWING]: stringifyTextTrackList,\n  [MediaUIAttributes.MEDIA_SEEKABLE]: serializeTuple,\n  [MediaUIAttributes.MEDIA_BUFFERED]: (tuples) => tuples == null ? void 0 : tuples.map(serializeTuple).join(\" \"),\n  [MediaUIAttributes.MEDIA_PREVIEW_COORDS]: (coords) => coords == null ? void 0 : coords.join(\" \"),\n  [MediaUIAttributes.MEDIA_RENDITION_LIST]: stringifyRenditionList,\n  [MediaUIAttributes.MEDIA_AUDIO_TRACK_LIST]: stringifyAudioTrackList\n};\nconst setAttr = async (child, attrName, attrValue) => {\n  var _a, _b;\n  if (!child.isConnected) {\n    await delay(0);\n  }\n  if (typeof attrValue === \"boolean\" || attrValue == null) {\n    return setBooleanAttr(child, attrName, attrValue);\n  }\n  if (typeof attrValue === \"number\") {\n    return setNumericAttr(child, attrName, attrValue);\n  }\n  if (typeof attrValue === \"string\") {\n    return setStringAttr(child, attrName, attrValue);\n  }\n  if (Array.isArray(attrValue) && !attrValue.length) {\n    return child.removeAttribute(attrName);\n  }\n  const val = (_b = (_a = CustomAttrSerializer[attrName]) == null ? void 0 : _a.call(CustomAttrSerializer, attrValue)) != null ? _b : attrValue;\n  return child.setAttribute(attrName, val);\n};\nconst isMediaSlotElementDescendant = (el) => {\n  var _a;\n  return !!((_a = el.closest) == null ? void 0 : _a.call(el, '*[slot=\"media\"]'));\n};\nconst traverseForMediaStateReceivers = (rootNode, mediaStateReceiverCallback) => {\n  if (isMediaSlotElementDescendant(rootNode)) {\n    return;\n  }\n  const traverseForMediaStateReceiversSync = (rootNode2, mediaStateReceiverCallback2) => {\n    var _a, _b;\n    if (isMediaStateReceiver(rootNode2)) {\n      mediaStateReceiverCallback2(rootNode2);\n    }\n    const { children = [] } = rootNode2 != null ? rootNode2 : {};\n    const shadowChildren = (_b = (_a = rootNode2 == null ? void 0 : rootNode2.shadowRoot) == null ? void 0 : _a.children) != null ? _b : [];\n    const allChildren = [...children, ...shadowChildren];\n    allChildren.forEach(\n      (child) => traverseForMediaStateReceivers(\n        child,\n        mediaStateReceiverCallback2\n      )\n    );\n  };\n  const name = rootNode == null ? void 0 : rootNode.nodeName.toLowerCase();\n  if (name.includes(\"-\") && !isMediaStateReceiver(rootNode)) {\n    globalThis.customElements.whenDefined(name).then(() => {\n      traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n    });\n    return;\n  }\n  traverseForMediaStateReceiversSync(rootNode, mediaStateReceiverCallback);\n};\nconst propagateMediaState = (els, stateName, val) => {\n  els.forEach((el) => {\n    if (stateName in el) {\n      el[stateName] = val;\n      return;\n    }\n    const relevantAttrs = getMediaUIAttributesFrom(el);\n    const attrName = stateName.toLowerCase();\n    if (!relevantAttrs.includes(attrName))\n      return;\n    setAttr(el, attrName, val);\n  });\n};\nconst monitorForMediaStateReceivers = (rootNode, registerMediaStateReceiver, unregisterMediaStateReceiver) => {\n  traverseForMediaStateReceivers(rootNode, registerMediaStateReceiver);\n  const registerMediaStateReceiverHandler = (evt) => {\n    var _a;\n    const el = (_a = evt == null ? void 0 : evt.composedPath()[0]) != null ? _a : evt.target;\n    registerMediaStateReceiver(el);\n  };\n  const unregisterMediaStateReceiverHandler = (evt) => {\n    var _a;\n    const el = (_a = evt == null ? void 0 : evt.composedPath()[0]) != null ? _a : evt.target;\n    unregisterMediaStateReceiver(el);\n  };\n  rootNode.addEventListener(\n    MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,\n    registerMediaStateReceiverHandler\n  );\n  rootNode.addEventListener(\n    MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,\n    unregisterMediaStateReceiverHandler\n  );\n  const mutationCallback = (mutationsList) => {\n    mutationsList.forEach((mutationRecord) => {\n      const {\n        addedNodes = [],\n        removedNodes = [],\n        type,\n        target,\n        attributeName\n      } = mutationRecord;\n      if (type === \"childList\") {\n        Array.prototype.forEach.call(\n          addedNodes,\n          (node) => traverseForMediaStateReceivers(\n            node,\n            registerMediaStateReceiver\n          )\n        );\n        Array.prototype.forEach.call(\n          removedNodes,\n          (node) => traverseForMediaStateReceivers(\n            node,\n            unregisterMediaStateReceiver\n          )\n        );\n      } else if (type === \"attributes\" && attributeName === MediaStateReceiverAttributes.MEDIA_CHROME_ATTRIBUTES) {\n        if (isMediaStateReceiver(target)) {\n          registerMediaStateReceiver(target);\n        } else {\n          unregisterMediaStateReceiver(target);\n        }\n      }\n    });\n  };\n  let prevSlotted = [];\n  const slotChangeHandler = (event) => {\n    const slotEl = event.target;\n    if (slotEl.name === \"media\")\n      return;\n    prevSlotted.forEach(\n      (node) => traverseForMediaStateReceivers(node, unregisterMediaStateReceiver)\n    );\n    prevSlotted = [\n      ...slotEl.assignedElements({ flatten: true })\n    ];\n    prevSlotted.forEach(\n      (node) => traverseForMediaStateReceivers(node, registerMediaStateReceiver)\n    );\n  };\n  rootNode.addEventListener(\"slotchange\", slotChangeHandler);\n  const observer = new MutationObserver(mutationCallback);\n  observer.observe(rootNode, {\n    childList: true,\n    attributes: true,\n    subtree: true\n  });\n  const unsubscribe = () => {\n    traverseForMediaStateReceivers(rootNode, unregisterMediaStateReceiver);\n    rootNode.removeEventListener(\"slotchange\", slotChangeHandler);\n    observer.disconnect();\n    rootNode.removeEventListener(\n      MediaUIEvents.REGISTER_MEDIA_STATE_RECEIVER,\n      registerMediaStateReceiverHandler\n    );\n    rootNode.removeEventListener(\n      MediaUIEvents.UNREGISTER_MEDIA_STATE_RECEIVER,\n      unregisterMediaStateReceiverHandler\n    );\n  };\n  return unsubscribe;\n};\nif (!globalThis.customElements.get(\"media-controller\")) {\n  globalThis.customElements.define(\"media-controller\", MediaController);\n}\nvar media_controller_default = MediaController;\nexport {\n  Attributes,\n  MediaController,\n  media_controller_default as default\n};\n"],"mappings":"AAAA,IAAIA,aAAa,GAAGA,CAACC,GAAG,EAAEC,MAAM,EAAEC,GAAG,KAAK;EACxC,IAAI,CAACD,MAAM,CAACE,GAAG,CAACH,GAAG,CAAC,EAClB,MAAMI,SAAS,CAAC,SAAS,GAAGF,GAAG,CAAC;AACpC,CAAC;AACD,IAAIG,YAAY,GAAGA,CAACL,GAAG,EAAEC,MAAM,EAAEK,MAAM,KAAK;EAC1CP,aAAa,CAACC,GAAG,EAAEC,MAAM,EAAE,yBAAyB,CAAC;EACrD,OAAOK,MAAM,GAAGA,MAAM,CAACC,IAAI,CAACP,GAAG,CAAC,GAAGC,MAAM,CAACO,GAAG,CAACR,GAAG,CAAC;AACpD,CAAC;AACD,IAAIS,YAAY,GAAGA,CAACT,GAAG,EAAEC,MAAM,EAAES,KAAK,KAAK;EACzC,IAAIT,MAAM,CAACE,GAAG,CAACH,GAAG,CAAC,EACjB,MAAMI,SAAS,CAAC,mDAAmD,CAAC;EACtEH,MAAM,YAAYU,OAAO,GAAGV,MAAM,CAACW,GAAG,CAACZ,GAAG,CAAC,GAAGC,MAAM,CAACY,GAAG,CAACb,GAAG,EAAEU,KAAK,CAAC;AACtE,CAAC;AACD,IAAII,YAAY,GAAGA,CAACd,GAAG,EAAEC,MAAM,EAAES,KAAK,EAAEK,MAAM,KAAK;EACjDhB,aAAa,CAACC,GAAG,EAAEC,MAAM,EAAE,wBAAwB,CAAC;EACpDc,MAAM,GAAGA,MAAM,CAACR,IAAI,CAACP,GAAG,EAAEU,KAAK,CAAC,GAAGT,MAAM,CAACY,GAAG,CAACb,GAAG,EAAEU,KAAK,CAAC;EACzD,OAAOA,KAAK;AACd,CAAC;AACD,IAAIM,eAAe,GAAGA,CAAChB,GAAG,EAAEC,MAAM,EAAEgB,MAAM,KAAK;EAC7ClB,aAAa,CAACC,GAAG,EAAEC,MAAM,EAAE,uBAAuB,CAAC;EACnD,OAAOgB,MAAM;AACf,CAAC;AACD,IAAIC,QAAQ,EAAEC,kBAAkB,EAAEC,WAAW,EAAEC,mBAAmB,EAAEC,sBAAsB,EAAEC,uBAAuB,EAAEC,kBAAkB,EAAEC,oBAAoB,EAAEC,aAAa,EAAEC,eAAe,EAAEC,eAAe,EAAEC,iBAAiB;AACjO,SAASC,cAAc,QAAQ,sBAAsB;AACrD,SAASC,QAAQ,EAAEC,UAAU,QAAQ,gCAAgC;AACrE,SAASC,kBAAkB,QAAQ,iCAAiC;AACpE,SACEC,KAAK,EACLC,sBAAsB,EACtBC,uBAAuB,QAClB,kBAAkB;AACzB,SAASC,sBAAsB,QAAQ,qBAAqB;AAC5D,SACEC,aAAa,EACbC,iBAAiB,EACjBC,4BAA4B,EAC5BC,8BAA8B,EAC9BC,YAAY,QACP,gBAAgB;AACvB,SACEC,cAAc,EACdC,cAAc,EACdC,aAAa,EACbC,cAAc,EACdC,cAAc,EACdC,aAAa,QACR,0BAA0B;AACjC,SAASC,gBAAgB,QAAQ,8BAA8B;AAC/D,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,MAAMC,iBAAiB,GAAG,CACxB,WAAW,EACX,YAAY,EACZ,OAAO,EACP,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,EACH,GAAG,CACJ;AACD,MAAMC,mBAAmB,GAAG,EAAE;AAC9B,MAAMC,UAAU,GAAG;EACjBC,iBAAiB,EAAE,kBAAkB;EACrCC,mBAAmB,EAAE,mBAAmB;EACxCC,gBAAgB,EAAE,iBAAiB;EACnCC,kBAAkB,EAAE,mBAAmB;EACvCC,OAAO,EAAE,SAAS;EAClBC,SAAS,EAAE,UAAU;EACrBC,gBAAgB,EAAE,gBAAgB;EAClCC,mBAAmB,EAAE,kBAAkB;EACvCC,oBAAoB,EAAE,kBAAkB;EACxCC,UAAU,EAAE,WAAW;EACvBC,cAAc,EAAE,cAAc;EAC9BC,sBAAsB,EAAE,qBAAqB;EAC7CC,gBAAgB,EAAE,gBAAgB;EAClCC,4BAA4B,EAAE,2BAA2B;EACzDC,6BAA6B,EAAE,4BAA4B;EAC3DC,IAAI,EAAE;AACR,CAAC;AACD,MAAMC,eAAe,SAASxC,cAAc,CAAC;EAC3CyC,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC;IACP9D,YAAY,CAAC,IAAI,EAAEe,kBAAkB,CAAC;IACtCf,YAAY,CAAC,IAAI,EAAEiB,aAAa,CAAC;IACjCjB,YAAY,CAAC,IAAI,EAAEmB,eAAe,CAAC;IACnC,IAAI,CAAC4C,mBAAmB,GAAG,EAAE;IAC7B,IAAI,CAACC,8BAA8B,GAAG,eAAgB,IAAIC,GAAG,CAAC,CAAC;IAC/DjE,YAAY,CAAC,IAAI,EAAES,QAAQ,EAAE,IAAIe,kBAAkB,CAAC,IAAI,EAAEoB,UAAU,CAACK,OAAO,CAAC,CAAC;IAC9EjD,YAAY,CAAC,IAAI,EAAEU,kBAAkB,EAAE,KAAK,CAAC,CAAC;IAC9CV,YAAY,CAAC,IAAI,EAAEW,WAAW,EAAE,KAAK,CAAC,CAAC;IACvCX,YAAY,CAAC,IAAI,EAAEY,mBAAmB,EAAE,KAAK,CAAC,CAAC;IAC/CZ,YAAY,CAAC,IAAI,EAAEa,sBAAsB,EAAE,KAAK,CAAC,CAAC;IAClDb,YAAY,CAAC,IAAI,EAAEc,uBAAuB,EAAGoD,KAAK,IAAK;MACrD,IAAIC,EAAE;MACN,CAACA,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAACF,KAAK,CAAC;IAC9E,CAAC,CAAC;IACF,IAAI,CAACG,gBAAgB,CAAC,IAAI,CAAC;IAC3B,IAAIC,SAAS,GAAG,CAAC,CAAC;IAClBjE,YAAY,CAAC,IAAI,EAAEO,mBAAmB,EAAG2D,SAAS,IAAK;MACrDC,MAAM,CAACC,OAAO,CAACF,SAAS,CAAC,CAACG,OAAO,CAACC,IAAA,IAA6B;QAAA,IAA5B,CAACC,SAAS,EAAEC,UAAU,CAAC,GAAAF,IAAA;QACxD,IAAIC,SAAS,IAAIN,SAAS,IAAIA,SAAS,CAACM,SAAS,CAAC,KAAKC,UAAU,EAC/D;QACF,IAAI,CAACC,mBAAmB,CAACF,SAAS,EAAEC,UAAU,CAAC;QAC/C,MAAME,QAAQ,GAAGH,SAAS,CAACI,WAAW,CAAC,CAAC;QACxC,MAAMC,GAAG,GAAG,IAAI1D,UAAU,CAAC2D,WAAW,CACpClD,8BAA8B,CAAC+C,QAAQ,CAAC,EACxC;UAAEI,QAAQ,EAAE,IAAI;UAAEC,MAAM,EAAEP;QAAW,CACvC,CAAC;QACD,IAAI,CAACQ,aAAa,CAACJ,GAAG,CAAC;MACzB,CAAC,CAAC;MACFX,SAAS,GAAGC,SAAS;IACvB,CAAC,CAAC;IACF,IAAI,CAACe,aAAa,CAAC,CAAC;EACtB;EACA,WAAWC,kBAAkBA,CAAA,EAAG;IAC9B,OAAO,KAAK,CAACA,kBAAkB,CAACC,MAAM,CACpC5C,UAAU,CAACU,UAAU,EACrBV,UAAU,CAACK,OAAO,EAClBL,UAAU,CAACE,mBAAmB,EAC9BF,UAAU,CAACC,iBAAiB,EAC5BD,UAAU,CAACG,gBAAgB,EAC3BH,UAAU,CAACgB,IACb,CAAC;EACH;EACA,IAAI6B,UAAUA,CAAA,EAAG;IACf,OAAO7F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC;EACxC;EACA,IAAI8E,UAAUA,CAACxF,KAAK,EAAE;IACpB,IAAIkE,EAAE,EAAEuB,EAAE;IACV,IAAI9F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,EAAE;MACnC,CAACwD,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEiB,sBAAsB,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGsD,EAAE,CAACrE,IAAI,CAAC,IAAI,CAAC;MAClFO,YAAY,CAAC,IAAI,EAAEQ,sBAAsB,EAAE,KAAK,CAAC,CAAC;IACpD;IACAR,YAAY,CAAC,IAAI,EAAEM,WAAW,EAAEV,KAAK,CAAC;IACtC,IAAI,CAACL,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,IAAI,CAAC,IAAI,CAACgF,YAAY,CAAC/C,UAAU,CAACa,gBAAgB,CAAC,EAAE;MACvFlD,eAAe,CAAC,IAAI,EAAEQ,kBAAkB,EAAEC,oBAAoB,CAAC,CAAClB,IAAI,CAAC,IAAI,CAAC;MAC1E;IACF;IACAO,YAAY,CAAC,IAAI,EAAEQ,sBAAsB,EAAE,CAAC6E,EAAE,GAAG9F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG+E,EAAE,CAACE,SAAS,CAC/GhG,YAAY,CAAC,IAAI,EAAEgB,mBAAmB,CACxC,CAAC,CAAC;EACJ;EACA,IAAIiF,iBAAiBA,CAAA,EAAG;IACtB,IAAI1B,EAAE;IACN,OAAO,CAACA,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEc,kBAAkB,CAAC,KAAK,IAAI,GAAGyD,EAAE,GAAG,IAAI;EAC1E;EACA,IAAI0B,iBAAiBA,CAACC,OAAO,EAAE;IAC7B,IAAI3B,EAAE;IACN,IAAI,IAAI,CAACwB,YAAY,CAAC/C,UAAU,CAACI,kBAAkB,CAAC,EAAE;MACpD,IAAI,CAAC+C,eAAe,CAACnD,UAAU,CAACI,kBAAkB,CAAC;IACrD;IACA3C,YAAY,CAAC,IAAI,EAAEK,kBAAkB,EAAEoF,OAAO,CAAC;IAC/C,CAAC3B,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAAC;MACpE4B,IAAI,EAAE,gCAAgC;MACtCZ,MAAM,EAAE,IAAI,CAACS;IACf,CAAC,CAAC;EACJ;EACA,IAAII,gBAAgBA,CAAA,EAAG;IACrB,OAAO/D,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACC,iBAAiB,CAAC;EAC3D;EACA,IAAIoD,gBAAgBA,CAAChG,KAAK,EAAE;IAC1BoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACC,iBAAiB,EAAE5C,KAAK,CAAC;EAC3D;EACA,IAAIiG,iBAAiBA,CAAA,EAAG;IACtB,OAAO9D,aAAa,CAAC,IAAI,EAAEQ,UAAU,CAACE,mBAAmB,CAAC;EAC5D;EACA,IAAIoD,iBAAiBA,CAACjG,KAAK,EAAE;IAC3BsC,aAAa,CAAC,IAAI,EAAEK,UAAU,CAACE,mBAAmB,EAAE7C,KAAK,CAAC;EAC5D;EACA,IAAIkG,eAAeA,CAAA,EAAG;IACpB,OAAOhE,cAAc,CAAC,IAAI,EAAES,UAAU,CAACG,gBAAgB,CAAC;EAC1D;EACA,IAAIoD,eAAeA,CAAClG,KAAK,EAAE;IACzBqC,cAAc,CAAC,IAAI,EAAEM,UAAU,CAACG,gBAAgB,EAAE9C,KAAK,CAAC;EAC1D;EACA,IAAImG,SAASA,CAAA,EAAG;IACd,OAAOlE,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACU,UAAU,CAAC;EACpD;EACA,IAAI8C,SAASA,CAACnG,KAAK,EAAE;IACnBoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACU,UAAU,EAAErD,KAAK,CAAC;EACpD;EACA,IAAIoG,QAAQA,CAAA,EAAG;IACb,OAAOjE,aAAa,CAAC,IAAI,EAAEQ,UAAU,CAACM,SAAS,CAAC;EAClD;EACA,IAAImD,QAAQA,CAACpG,KAAK,EAAE;IAClBsC,aAAa,CAAC,IAAI,EAAEK,UAAU,CAACM,SAAS,EAAEjD,KAAK,CAAC;EAClD;EACA,IAAIqG,cAAcA,CAAA,EAAG;IACnB,OAAOnE,cAAc,CAAC,IAAI,EAAES,UAAU,CAACO,gBAAgB,CAAC;EAC1D;EACA,IAAImD,cAAcA,CAACrG,KAAK,EAAE;IACxBqC,cAAc,CAAC,IAAI,EAAEM,UAAU,CAACO,gBAAgB,EAAElD,KAAK,CAAC;EAC1D;EACA,IAAIsG,gBAAgBA,CAAA,EAAG;IACrB,OAAOrE,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACS,oBAAoB,CAAC;EAC9D;EACA,IAAIkD,gBAAgBA,CAACtG,KAAK,EAAE;IAC1BoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACS,oBAAoB,EAAEpD,KAAK,CAAC;EAC9D;EACA,IAAIuG,YAAYA,CAAA,EAAG;IACjB,OAAOtE,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACW,cAAc,CAAC;EACxD;EACA,IAAIiD,YAAYA,CAACvG,KAAK,EAAE;IACtBoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACW,cAAc,EAAEtD,KAAK,CAAC;EACxD;EACA,IAAIwG,mBAAmBA,CAAA,EAAG;IACxB,OAAOvE,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACY,sBAAsB,CAAC;EAChE;EACA,IAAIiD,mBAAmBA,CAACxG,KAAK,EAAE;IAC7BoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACY,sBAAsB,EAAEvD,KAAK,CAAC;EAChE;EACA,IAAIyG,cAAcA,CAAA,EAAG;IACnB,OAAOxE,cAAc,CAAC,IAAI,EAAEU,UAAU,CAACa,gBAAgB,CAAC;EAC1D;EACA,IAAIiD,cAAcA,CAACzG,KAAK,EAAE;IACxBoC,cAAc,CAAC,IAAI,EAAEO,UAAU,CAACa,gBAAgB,EAAExD,KAAK,CAAC;EAC1D;EACA0G,wBAAwBA,CAAC5B,QAAQ,EAAE6B,QAAQ,EAAEC,QAAQ,EAAE;IACrD,IAAI1C,EAAE,EAAEuB,EAAE,EAAEoB,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;IAClC,KAAK,CAACR,wBAAwB,CAAC5B,QAAQ,EAAE6B,QAAQ,EAAEC,QAAQ,CAAC;IAC5D,IAAI9B,QAAQ,KAAKnC,UAAU,CAACU,UAAU,EAAE;MACtC,IAAIuD,QAAQ,KAAKD,QAAQ,IAAIC,QAAQ,KAAK,EAAE,EAAE;QAC5C,IAAI,IAAI,CAAClB,YAAY,CAAC/C,UAAU,CAACK,OAAO,CAAC,EAAE;UACzCmE,OAAO,CAACC,IAAI,CACV,2FACF,CAAC;QACH;QACA,IAAI,CAACC,cAAc,CAAC,CAAC;MACvB,CAAC,MAAM,IAAIT,QAAQ,KAAKD,QAAQ,IAAIC,QAAQ,KAAK,IAAI,EAAE;QACrD,IAAI,CAACvB,aAAa,CAAC,CAAC;MACtB;IACF,CAAC,MAAM,IAAIP,QAAQ,KAAKnC,UAAU,CAACK,OAAO,EAAE;MAC1CrD,YAAY,CAAC,IAAI,EAAEa,QAAQ,CAAC,CAACR,KAAK,GAAG4G,QAAQ;IAC/C,CAAC,MAAM,IAAI9B,QAAQ,KAAKnC,UAAU,CAACC,iBAAiB,IAAIgE,QAAQ,KAAKD,QAAQ,EAAE;MAC7E,CAACzC,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAAC;QACpE4B,IAAI,EAAE,sBAAsB;QAC5BZ,MAAM,EAAE;UACNa,gBAAgB,EAAE,IAAI,CAACN,YAAY,CAAC/C,UAAU,CAACC,iBAAiB;QAClE;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIkC,QAAQ,KAAKnC,UAAU,CAACE,mBAAmB,EAAE;MACtD,CAACgE,EAAE,GAAGlH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGmG,EAAE,CAAC1C,QAAQ,CAAC;QACpE4B,IAAI,EAAE,sBAAsB;QAC5BZ,MAAM,EAAE;UACNc,iBAAiB,EAAE,CAACR,EAAE,GAAG,IAAI,CAAC6B,YAAY,CAAC3E,UAAU,CAACE,mBAAmB,CAAC,KAAK,IAAI,GAAG4C,EAAE,GAAG,KAAK;QAClG;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIX,QAAQ,KAAKnC,UAAU,CAACO,gBAAgB,EAAE;MACnD,CAAC4D,EAAE,GAAGnH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGoG,EAAE,CAAC3C,QAAQ,CAAC;QACpE4B,IAAI,EAAE,sBAAsB;QAC5BZ,MAAM,EAAE;UACNkB,cAAc,EAAE,IAAI,CAACX,YAAY,CAAC/C,UAAU,CAACO,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAACoE,YAAY,CAAC3E,UAAU,CAACO,gBAAgB,CAAC,GAAG,KAAK,CAAC;UACzHqE,gBAAgB,EAAE,CAAC,IAAI,CAAC7B,YAAY,CAAC/C,UAAU,CAACQ,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAACmE,YAAY,CAAC3E,UAAU,CAACO,gBAAgB,CAAC,GAAG,KAAK;QAChI;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI4B,QAAQ,KAAKnC,UAAU,CAACQ,mBAAmB,EAAE;MACtD,CAAC4D,EAAE,GAAGpH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGqG,EAAE,CAAC5C,QAAQ,CAAC;QACpE4B,IAAI,EAAE,sBAAsB;QAC5BZ,MAAM,EAAE;UACNoC,gBAAgB,EAAE,IAAI,CAAC7B,YAAY,CAAC/C,UAAU,CAACQ,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAACmE,YAAY,CAAC3E,UAAU,CAACQ,mBAAmB,CAAC,GAAG,KAAK;QAClI;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI2B,QAAQ,KAAKnC,UAAU,CAACS,oBAAoB,EAAE;MACvD,CAAC4D,EAAE,GAAGrH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGsG,EAAE,CAAC7C,QAAQ,CAAC;QACpE4B,IAAI,EAAE,sBAAsB;QAC5BZ,MAAM,EAAE;UACNmB,gBAAgB,EAAE,IAAI,CAACZ,YAAY,CAAC/C,UAAU,CAACS,oBAAoB;QACrE;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI0B,QAAQ,KAAKnC,UAAU,CAACI,kBAAkB,EAAE;MACrD,MAAMyE,EAAE,GAAGZ,QAAQ,GAAG,CAACK,EAAE,GAAG,IAAI,CAACQ,WAAW,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGR,EAAE,CAACS,cAAc,CAACd,QAAQ,CAAC,GAAG,KAAK,CAAC;MACvGxG,YAAY,CAAC,IAAI,EAAEK,kBAAkB,EAAE+G,EAAE,CAAC;MAC1C,CAACN,EAAE,GAAGvH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwG,EAAE,CAAC/C,QAAQ,CAAC;QACpE4B,IAAI,EAAE,gCAAgC;QACtCZ,MAAM,EAAE,IAAI,CAACS;MACf,CAAC,CAAC;IACJ,CAAC,MAAM,IAAId,QAAQ,KAAKnC,UAAU,CAACgB,IAAI,IAAIiD,QAAQ,KAAKD,QAAQ,EAAE;MAChEnE,WAAW,CAACoE,QAAQ,CAAC;IACvB;EACF;EACAe,iBAAiBA,CAAA,EAAG;IAClB,IAAIzD,EAAE,EAAEuB,EAAE;IACV,IAAI,CAAC9F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,IAAI,CAAC,IAAI,CAACgF,YAAY,CAAC/C,UAAU,CAACa,gBAAgB,CAAC,EAAE;MACvFlD,eAAe,CAAC,IAAI,EAAEQ,kBAAkB,EAAEC,oBAAoB,CAAC,CAAClB,IAAI,CAAC,IAAI,CAAC;IAC5E;IACA,CAACqE,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAAC;MACpE4B,IAAI,EAAE,8BAA8B;MACpCZ,MAAM,EAAE9D;IACV,CAAC,CAAC;IACF,KAAK,CAACsG,iBAAiB,CAAC,CAAC;IACzB,IAAIhI,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,IAAI,CAACf,YAAY,CAAC,IAAI,EAAEiB,sBAAsB,CAAC,EAAE;MAClFR,YAAY,CAAC,IAAI,EAAEQ,sBAAsB,EAAE,CAAC6E,EAAE,GAAG9F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG+E,EAAE,CAACE,SAAS,CAC/GhG,YAAY,CAAC,IAAI,EAAEgB,mBAAmB,CACxC,CAAC,CAAC;IACJ;IACA,IAAI,CAAC0E,aAAa,CAAC,CAAC;EACtB;EACAuC,oBAAoBA,CAAA,EAAG;IACrB,IAAI1D,EAAE,EAAEuB,EAAE,EAAEoB,EAAE,EAAEC,EAAE;IAClB,CAAC5C,EAAE,GAAG,KAAK,CAAC0D,oBAAoB,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG1D,EAAE,CAACrE,IAAI,CAAC,IAAI,CAAC;IAClE,IAAIF,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,EAAE;MACnC,CAAC+E,EAAE,GAAG9F,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG+E,EAAE,CAACtB,QAAQ,CAAC;QACpE4B,IAAI,EAAE,8BAA8B;QACpCZ,MAAM,EAAE,KAAK;MACf,CAAC,CAAC;MACF,CAAC0B,EAAE,GAAGlH,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGmG,EAAE,CAAC1C,QAAQ,CAAC;QACpE4B,IAAI,EAAEnE,aAAa,CAACiG,8BAA8B;QAClD1C,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;IACA,IAAIxF,YAAY,CAAC,IAAI,EAAEiB,sBAAsB,CAAC,EAAE;MAC9C,CAACkG,EAAE,GAAGnH,YAAY,CAAC,IAAI,EAAEiB,sBAAsB,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGkG,EAAE,CAACjH,IAAI,CAAC,IAAI,CAAC;MAClFO,YAAY,CAAC,IAAI,EAAEQ,sBAAsB,EAAE,KAAK,CAAC,CAAC;IACpD;EACF;EACA;AACF;AACA;AACA;EACEkH,gBAAgBA,CAACC,KAAK,EAAE;IACtB,IAAI7D,EAAE;IACN,KAAK,CAAC4D,gBAAgB,CAACC,KAAK,CAAC;IAC7B,CAAC7D,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAAC;MACpE4B,IAAI,EAAE,2BAA2B;MACjCZ,MAAM,EAAE4C;IACV,CAAC,CAAC;IACF,IAAI,CAACA,KAAK,CAACrC,YAAY,CAAC,UAAU,CAAC,EAAE;MACnCqC,KAAK,CAACC,QAAQ,GAAG,CAAC,CAAC;IACrB;EACF;EACA;AACF;AACA;AACA;EACEC,kBAAkBA,CAACF,KAAK,EAAE;IACxB,IAAI7D,EAAE;IACN,KAAK,CAAC+D,kBAAkB,CAACF,KAAK,CAAC;IAC/B,CAAC7D,EAAE,GAAGvE,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGwD,EAAE,CAACC,QAAQ,CAAC;MACpE4B,IAAI,EAAE,2BAA2B;MACjCZ,MAAM,EAAE,KAAK;IACf,CAAC,CAAC;EACJ;EACAN,mBAAmBA,CAACF,SAAS,EAAEuD,KAAK,EAAE;IACpCrD,mBAAmB,CAAC,IAAI,CAACf,mBAAmB,EAAEa,SAAS,EAAEuD,KAAK,CAAC;EACjE;EACA9D,gBAAgBA,CAACyB,OAAO,EAAE;IACxB,IAAI,CAACA,OAAO,EACV;IACF,MAAM;MAAE9B;IAA+B,CAAC,GAAG,IAAI;IAC/C,IAAIA,8BAA8B,CAACtE,GAAG,CAACoG,OAAO,CAAC,EAC7C;IACF,MAAMsC,0BAA0B,GAAG,IAAI,CAACA,0BAA0B,CAACC,IAAI,CAAC,IAAI,CAAC;IAC7E,MAAMC,4BAA4B,GAAG,IAAI,CAACA,4BAA4B,CAACD,IAAI,CAAC,IAAI,CAAC;IACjF,MAAME,WAAW,GAAGC,6BAA6B,CAC/C1C,OAAO,EACPsC,0BAA0B,EAC1BE,4BACF,CAAC;IACD9D,MAAM,CAACiE,MAAM,CAAC5G,aAAa,CAAC,CAAC6C,OAAO,CAAEgE,SAAS,IAAK;MAClD5C,OAAO,CAAC6C,gBAAgB,CAACD,SAAS,EAAE9I,YAAY,CAAC,IAAI,EAAEkB,uBAAuB,CAAC,CAAC;IAClF,CAAC,CAAC;IACFkD,8BAA8B,CAAC5D,GAAG,CAAC0F,OAAO,EAAEyC,WAAW,CAAC;EAC1D;EACAK,kBAAkBA,CAAC9C,OAAO,EAAE;IAC1B,IAAI,CAACA,OAAO,EACV;IACF,MAAM;MAAE9B;IAA+B,CAAC,GAAG,IAAI;IAC/C,IAAI,CAACA,8BAA8B,CAACtE,GAAG,CAACoG,OAAO,CAAC,EAC9C;IACF,MAAMyC,WAAW,GAAGvE,8BAA8B,CAACjE,GAAG,CAAC+F,OAAO,CAAC;IAC/DyC,WAAW,CAAC,CAAC;IACbvE,8BAA8B,CAAC6E,MAAM,CAAC/C,OAAO,CAAC;IAC9CtB,MAAM,CAACiE,MAAM,CAAC5G,aAAa,CAAC,CAAC6C,OAAO,CAAEgE,SAAS,IAAK;MAClD5C,OAAO,CAACgD,mBAAmB,CAACJ,SAAS,EAAE9I,YAAY,CAAC,IAAI,EAAEkB,uBAAuB,CAAC,CAAC;IACrF,CAAC,CAAC;EACJ;EACAsH,0BAA0BA,CAACX,EAAE,EAAE;IAC7B,IAAI,CAACA,EAAE,EACL;IACF,MAAMsB,GAAG,GAAG,IAAI,CAAChF,mBAAmB;IACpC,MAAMiF,KAAK,GAAGD,GAAG,CAACE,OAAO,CAACxB,EAAE,CAAC;IAC7B,IAAIuB,KAAK,GAAG,CAAC,CAAC,EACZ;IACFD,GAAG,CAACG,IAAI,CAACzB,EAAE,CAAC;IACZ,IAAI7H,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,EAAE;MACnC6D,MAAM,CAACC,OAAO,CAAC7E,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,CAACwI,QAAQ,CAAC,CAAC,CAAC,CAACzE,OAAO,CAChE0E,KAAA,IAA6B;QAAA,IAA5B,CAACxE,SAAS,EAAEC,UAAU,CAAC,GAAAuE,KAAA;QACtBtE,mBAAmB,CAAC,CAAC2C,EAAE,CAAC,EAAE7C,SAAS,EAAEC,UAAU,CAAC;MAClD,CACF,CAAC;IACH;EACF;EACAyD,4BAA4BA,CAACb,EAAE,EAAE;IAC/B,MAAMsB,GAAG,GAAG,IAAI,CAAChF,mBAAmB;IACpC,MAAMiF,KAAK,GAAGD,GAAG,CAACE,OAAO,CAACxB,EAAE,CAAC;IAC7B,IAAIuB,KAAK,GAAG,CAAC,EACX;IACFD,GAAG,CAACM,MAAM,CAACL,KAAK,EAAE,CAAC,CAAC;EACtB;EACA1D,aAAaA,CAAA,EAAG;IACd,IAAI,CAACqD,gBAAgB,CAAC,SAAS,EAAEpI,eAAe,CAAC,IAAI,EAAEY,eAAe,EAAEC,iBAAiB,CAAC,CAAC;EAC7F;EACAkG,cAAcA,CAAA,EAAG;IACf,IAAI,CAACwB,mBAAmB,CAAC,SAAS,EAAEvI,eAAe,CAAC,IAAI,EAAEY,eAAe,EAAEC,iBAAiB,CAAC,CAAC;IAC9F,IAAI,CAAC0H,mBAAmB,CAAC,OAAO,EAAEvI,eAAe,CAAC,IAAI,EAAEU,aAAa,EAAEC,eAAe,CAAC,CAAC;EAC1F;EACA,IAAIoI,OAAOA,CAAA,EAAG;IACZ,OAAOlH,aAAa,CAAC,IAAI,EAAEQ,UAAU,CAACK,OAAO,CAAC;EAChD;EACA,IAAIqG,OAAOA,CAACrJ,KAAK,EAAE;IACjBsC,aAAa,CAAC,IAAI,EAAEK,UAAU,CAACK,OAAO,EAAEhD,KAAK,CAAC;EAChD;EACAsJ,uBAAuBA,CAACC,CAAC,EAAE;IACzB,IAAIrF,EAAE,EAAEuB,EAAE,EAAEoB,EAAE,EAAEC,EAAE,EAAEC,EAAE;IACtB,MAAMyC,MAAM,GAAGD,CAAC,CAACC,MAAM;IACvB,MAAMpD,QAAQ,GAAG,CAAC,CAACS,EAAE,GAAG,CAACpB,EAAE,GAAG,CAACvB,EAAE,GAAGsF,MAAM,CAAClC,YAAY,CAAC3E,UAAU,CAACM,SAAS,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGiB,EAAE,CAACuF,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,GAAGhE,EAAE,GAAG+D,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACpD,QAAQ,KAAK,IAAI,GAAGS,EAAE,GAAG,EAAE,EAAE6C,GAAG,CAAEC,GAAG,IAAKA,GAAG,KAAK,OAAO,GAAG,GAAG,GAAGA,GAAG,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;IACvP,IAAIzD,QAAQ,CAAC0D,QAAQ,CAACP,CAAC,CAACI,GAAG,CAAC,EAAE;MAC5B;IACF;IACA,IAAIlB,SAAS,EAAEtD,MAAM,EAAEH,GAAG;IAC1B,IAAIrF,YAAY,CAAC,IAAI,EAAEa,QAAQ,CAAC,CAACuJ,QAAQ,CAAC,KAAKR,CAAC,CAACI,GAAG,CAAC5E,WAAW,CAAC,CAAC,EAAE,CAAC,EACnE;IACF,IAAIwE,CAAC,CAACI,GAAG,KAAK,GAAG,IAAIhK,YAAY,CAAC,IAAI,EAAEa,QAAQ,CAAC,CAACuJ,QAAQ,CAAC,SAAS,CAAC,EACnE;IACF,QAAQR,CAAC,CAACI,GAAG;MACX,KAAK,GAAG;MACR,KAAK,GAAG;QACNlB,SAAS,GAAG9I,YAAY,CAAC,IAAI,EAAEe,WAAW,CAAC,CAACwI,QAAQ,CAAC,CAAC,CAACc,WAAW,GAAGpI,aAAa,CAACqI,kBAAkB,GAAGrI,aAAa,CAACsI,mBAAmB;QACzI,IAAI,CAAC9E,aAAa,CAChB,IAAI9D,UAAU,CAAC2D,WAAW,CAACwD,SAAS,EAAE;UACpCvD,QAAQ,EAAE,IAAI;UACdiF,OAAO,EAAE;QACX,CAAC,CACH,CAAC;QACD;MACF,KAAK,GAAG;QACN1B,SAAS,GAAG,IAAI,CAACjD,UAAU,CAAC0D,QAAQ,CAAC,CAAC,CAACkB,gBAAgB,KAAK,KAAK,GAAGxI,aAAa,CAACyI,oBAAoB,GAAGzI,aAAa,CAAC0I,kBAAkB;QACzI,IAAI,CAAClF,aAAa,CAChB,IAAI9D,UAAU,CAAC2D,WAAW,CAACwD,SAAS,EAAE;UACpCvD,QAAQ,EAAE,IAAI;UACdiF,OAAO,EAAE;QACX,CAAC,CACH,CAAC;QACD;MACF,KAAK,GAAG;QACN1B,SAAS,GAAG,IAAI,CAACjD,UAAU,CAAC0D,QAAQ,CAAC,CAAC,CAACqB,iBAAiB,GAAG3I,aAAa,CAAC4I,6BAA6B,GAAG5I,aAAa,CAAC6I,8BAA8B;QACrJ,IAAI,CAACrF,aAAa,CAChB,IAAI9D,UAAU,CAAC2D,WAAW,CAACwD,SAAS,EAAE;UACpCvD,QAAQ,EAAE,IAAI;UACdiF,OAAO,EAAE;QACX,CAAC,CACH,CAAC;QACD;MACF,KAAK,GAAG;QACN,IAAI,CAAC/E,aAAa,CAChB,IAAI9D,UAAU,CAAC2D,WAAW,CACxBrD,aAAa,CAACiG,8BAA8B,EAC5C;UAAE3C,QAAQ,EAAE,IAAI;UAAEiF,OAAO,EAAE;QAAK,CAClC,CACF,CAAC;QACD;MACF,KAAK,WAAW;QAAE;UAChB,MAAMO,WAAW,GAAG,IAAI,CAAChF,YAAY,CACnC/C,UAAU,CAACe,6BACb,CAAC,GAAG,CAAC,IAAI,CAAC4D,YAAY,CAAC3E,UAAU,CAACe,6BAA6B,CAAC,GAAGhB,mBAAmB;UACtFyC,MAAM,GAAGwF,IAAI,CAACC,GAAG,CACf,CAAC,CAAC9D,EAAE,GAAG,IAAI,CAACtB,UAAU,CAAC0D,QAAQ,CAAC,CAAC,CAAC2B,gBAAgB,KAAK,IAAI,GAAG/D,EAAE,GAAG,CAAC,IAAI4D,WAAW,EACnF,CACF,CAAC;UACD1F,GAAG,GAAG,IAAI1D,UAAU,CAAC2D,WAAW,CAACrD,aAAa,CAACkJ,kBAAkB,EAAE;YACjE5F,QAAQ,EAAE,IAAI;YACdiF,OAAO,EAAE,IAAI;YACbhF;UACF,CAAC,CAAC;UACF,IAAI,CAACC,aAAa,CAACJ,GAAG,CAAC;UACvB;QACF;MACA,KAAK,YAAY;QAAE;UACjB,MAAM0F,WAAW,GAAG,IAAI,CAAChF,YAAY,CACnC/C,UAAU,CAACc,4BACb,CAAC,GAAG,CAAC,IAAI,CAAC6D,YAAY,CAAC3E,UAAU,CAACc,4BAA4B,CAAC,GAAGf,mBAAmB;UACrFyC,MAAM,GAAGwF,IAAI,CAACC,GAAG,CACf,CAAC,CAAC7D,EAAE,GAAG,IAAI,CAACvB,UAAU,CAAC0D,QAAQ,CAAC,CAAC,CAAC2B,gBAAgB,KAAK,IAAI,GAAG9D,EAAE,GAAG,CAAC,IAAI2D,WAAW,EACnF,CACF,CAAC;UACD1F,GAAG,GAAG,IAAI1D,UAAU,CAAC2D,WAAW,CAACrD,aAAa,CAACkJ,kBAAkB,EAAE;YACjE5F,QAAQ,EAAE,IAAI;YACdiF,OAAO,EAAE,IAAI;YACbhF;UACF,CAAC,CAAC;UACF,IAAI,CAACC,aAAa,CAACJ,GAAG,CAAC;UACvB;QACF;MACA;QACE;IACJ;EACF;AACF;AACAxE,QAAQ,GAAG,IAAIuK,OAAO,CAAC,CAAC;AACxBtK,kBAAkB,GAAG,IAAIsK,OAAO,CAAC,CAAC;AAClCrK,WAAW,GAAG,IAAIqK,OAAO,CAAC,CAAC;AAC3BpK,mBAAmB,GAAG,IAAIoK,OAAO,CAAC,CAAC;AACnCnK,sBAAsB,GAAG,IAAImK,OAAO,CAAC,CAAC;AACtClK,uBAAuB,GAAG,IAAIkK,OAAO,CAAC,CAAC;AACvCjK,kBAAkB,GAAG,IAAIb,OAAO,CAAC,CAAC;AAClCc,oBAAoB,GAAG,SAAAA,CAAA,EAAW;EAChC,IAAImD,EAAE;EACN,IAAI,CAACsB,UAAU,GAAGjD,gBAAgB,CAAC;IACjCwF,KAAK,EAAE,IAAI,CAACA,KAAK;IACjBnC,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;IACzCoF,OAAO,EAAE;MACPhF,gBAAgB,EAAE,IAAI,CAACN,YAAY,CAAC/C,UAAU,CAACC,iBAAiB,CAAC;MACjEsD,eAAe,EAAE,IAAI,CAACR,YAAY,CAAC/C,UAAU,CAACG,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAACwE,YAAY,CAAC3E,UAAU,CAACG,gBAAgB,CAAC,GAAG,KAAK,CAAC;MAC1HmD,iBAAiB,GACf;MACA,CAAC/B,EAAE,GAAG,IAAI,CAACoD,YAAY,CACrB3E,UAAU,CAACE,mBACb,CAAC,KAAK,IAAI,GAAGqB,EAAE,GAAG,KAAK,CAAC,CACzB;MACDmC,cAAc,EAAE,IAAI,CAACX,YAAY,CAAC/C,UAAU,CAACO,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAACoE,YAAY,CAAC3E,UAAU,CAACO,gBAAgB,CAAC,GAAG,KAAK,CAAC;MACzHqE,gBAAgB,EAAE,IAAI,CAAC7B,YAAY,CAAC/C,UAAU,CAACQ,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAACmE,YAAY,CAAC3E,UAAU,CAACQ,mBAAmB,CAAC,GAAG,IAAI,CAACuC,YAAY,CAAC/C,UAAU,CAACO,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAACoE,YAAY,CAAC3E,UAAU,CAACO,gBAAgB,CAAC,GAAG,KAAK,CAAC;MACpOoD,gBAAgB,EAAE,IAAI,CAACZ,YAAY,CAAC/C,UAAU,CAACS,oBAAoB,CAAC;MACpE;MACAmD,YAAY,EAAE,IAAI,CAACb,YAAY,CAAC/C,UAAU,CAACW,cAAc,CAAC;MAC1DkD,mBAAmB,EAAE,IAAI,CAACd,YAAY,CACpC/C,UAAU,CAACY,sBACb;IACF;EACF,CAAC,CAAC;AACJ,CAAC;AACDvC,aAAa,GAAG,IAAIf,OAAO,CAAC,CAAC;AAC7BgB,eAAe,GAAG,SAAAA,CAASsI,CAAC,EAAE;EAC5B,MAAM;IAAEI;EAAI,CAAC,GAAGJ,CAAC;EACjB,IAAI,CAAC9G,iBAAiB,CAACqH,QAAQ,CAACH,GAAG,CAAC,EAAE;IACpC,IAAI,CAACd,mBAAmB,CAAC,OAAO,EAAEvI,eAAe,CAAC,IAAI,EAAEU,aAAa,EAAEC,eAAe,CAAC,CAAC;IACxF;EACF;EACA,IAAI,CAACqI,uBAAuB,CAACC,CAAC,CAAC;AACjC,CAAC;AACDrI,eAAe,GAAG,IAAIjB,OAAO,CAAC,CAAC;AAC/BkB,iBAAiB,GAAG,SAAAA,CAASoI,CAAC,EAAE;EAC9B,MAAM;IAAE0B,OAAO;IAAEC,MAAM;IAAEvB;EAAI,CAAC,GAAGJ,CAAC;EAClC,IAAI0B,OAAO,IAAIC,MAAM,IAAI,CAACzI,iBAAiB,CAACqH,QAAQ,CAACH,GAAG,CAAC,EAAE;IACzD,IAAI,CAACd,mBAAmB,CAAC,OAAO,EAAEvI,eAAe,CAAC,IAAI,EAAEU,aAAa,EAAEC,eAAe,CAAC,CAAC;IACxF;EACF;EACA,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC6I,QAAQ,CAACH,GAAG,CAAC,IAAI,EAAEhK,YAAY,CAAC,IAAI,EAAEa,QAAQ,CAAC,CAACuJ,QAAQ,CAAC,KAAKJ,GAAG,CAAC5E,WAAW,CAAC,CAAC,EAAE,CAAC,IAAI4E,GAAG,KAAK,GAAG,IAAIhK,YAAY,CAAC,IAAI,EAAEa,QAAQ,CAAC,CAACuJ,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE;IAC3LR,CAAC,CAAC4B,cAAc,CAAC,CAAC;EACpB;EACA,IAAI,CAACzC,gBAAgB,CAAC,OAAO,EAAEpI,eAAe,CAAC,IAAI,EAAEU,aAAa,EAAEC,eAAe,CAAC,EAAE;IAAEmK,IAAI,EAAE;EAAK,CAAC,CAAC;AACvG,CAAC;AACD,MAAMC,wBAAwB,GAAG9G,MAAM,CAACiE,MAAM,CAAC3G,iBAAiB,CAAC;AACjE,MAAMyJ,mBAAmB,GAAG/G,MAAM,CAACiE,MAAM,CAACxG,YAAY,CAAC;AACvD,MAAMuJ,wBAAwB,GAAIC,KAAK,IAAK;EAC1C,IAAItH,EAAE,EAAEuB,EAAE,EAAEoB,EAAE,EAAEC,EAAE;EAClB,IAAI;IAAExB;EAAmB,CAAC,GAAGkG,KAAK,CAAC3H,WAAW;EAC9C,IAAI,CAACyB,kBAAkB,KAAK,CAACpB,EAAE,GAAGsH,KAAK,CAACC,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGvH,EAAE,CAAC4F,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;IACtFxI,UAAU,CAACoK,cAAc,CAACC,OAAO,CAACH,KAAK,CAAC;IACxC,CAAC;MAAElG;IAAmB,CAAC,GAAGkG,KAAK,CAAC3H,WAAW;EAC7C;EACA,MAAM+H,yBAAyB,GAAG,CAAC9E,EAAE,GAAG,CAACD,EAAE,GAAG,CAACpB,EAAE,GAAG+F,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,KAAK,CAAClE,YAAY,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG7B,EAAE,CAAC5F,IAAI,CAAC2L,KAAK,EAAE1J,4BAA4B,CAAC+J,uBAAuB,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGhF,EAAE,CAAC4C,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG3C,EAAE,CAACjH,IAAI,CAACgH,EAAE,EAAE,KAAK,CAAC;EAC5P,IAAI,CAACiF,KAAK,CAACC,OAAO,CAACzG,kBAAkB,IAAIsG,yBAAyB,CAAC,EACjE,OAAO,EAAE;EACX,OAAO,CAACtG,kBAAkB,IAAIsG,yBAAyB,EAAEhC,MAAM,CAC5D9E,QAAQ,IAAKuG,wBAAwB,CAACvB,QAAQ,CAAChF,QAAQ,CAC1D,CAAC;AACH,CAAC;AACD,MAAMkH,eAAe,GAAIC,2BAA2B,IAAK;EACvD,IAAI/H,EAAE,EAAEuB,EAAE;EACV,IAAI,CAAC,CAACvB,EAAE,GAAG+H,2BAA2B,CAACR,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGvH,EAAE,CAAC4F,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAACxI,UAAU,CAACoK,cAAc,CAAC5L,GAAG,CACtH,CAAC2F,EAAE,GAAGwG,2BAA2B,CAACR,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGhG,EAAE,CAACV,WAAW,CAAC,CAChF,CAAC,IAAI,EAAEkH,2BAA2B,YAAY3K,UAAU,CAACoK,cAAc,CAAC5L,GAAG,CACzEmM,2BAA2B,CAACR,QAAQ,CAAC1G,WAAW,CAAC,CACnD,CAAC,CAAC,EAAE;IACFzD,UAAU,CAACoK,cAAc,CAACC,OAAO,CAACM,2BAA2B,CAAC;EAChE;EACA,OAAOX,mBAAmB,CAACY,IAAI,CAC5BC,QAAQ,IAAKA,QAAQ,IAAIF,2BAC5B,CAAC;AACH,CAAC;AACD,MAAMG,oBAAoB,GAAIZ,KAAK,IAAK;EACtC,OAAOQ,eAAe,CAACR,KAAK,CAAC,IAAI,CAAC,CAACD,wBAAwB,CAACC,KAAK,CAAC,CAACa,MAAM;AAC3E,CAAC;AACD,MAAMC,cAAc,GAAIC,KAAK,IAAK;EAChC,IAAIrI,EAAE;EACN,OAAO,CAACA,EAAE,GAAGqI,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACC,IAAI,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGtI,EAAE,CAACrE,IAAI,CAAC0M,KAAK,EAAE,GAAG,CAAC;AAC1F,CAAC;AACD,MAAME,oBAAoB,GAAG;EAC3B,CAAC5K,iBAAiB,CAAC6K,oBAAoB,GAAG/K,sBAAsB;EAChE,CAACE,iBAAiB,CAAC8K,uBAAuB,GAAGhL,sBAAsB;EACnE,CAACE,iBAAiB,CAAC+K,cAAc,GAAGN,cAAc;EAClD,CAACzK,iBAAiB,CAACgL,cAAc,GAAIC,MAAM,IAAKA,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACpD,GAAG,CAAC4C,cAAc,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC;EAC9G,CAAC3K,iBAAiB,CAACkL,oBAAoB,GAAIC,MAAM,IAAKA,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACR,IAAI,CAAC,GAAG,CAAC;EAChG,CAAC3K,iBAAiB,CAACoL,oBAAoB,GAAGxL,sBAAsB;EAChE,CAACI,iBAAiB,CAACqL,sBAAsB,GAAGxL;AAC9C,CAAC;AACD,MAAMyL,OAAO,GAAG,MAAAA,CAAO3B,KAAK,EAAE1G,QAAQ,EAAEsI,SAAS,KAAK;EACpD,IAAIlJ,EAAE,EAAEuB,EAAE;EACV,IAAI,CAAC+F,KAAK,CAAC6B,WAAW,EAAE;IACtB,MAAM7L,KAAK,CAAC,CAAC,CAAC;EAChB;EACA,IAAI,OAAO4L,SAAS,KAAK,SAAS,IAAIA,SAAS,IAAI,IAAI,EAAE;IACvD,OAAOhL,cAAc,CAACoJ,KAAK,EAAE1G,QAAQ,EAAEsI,SAAS,CAAC;EACnD;EACA,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;IACjC,OAAO/K,cAAc,CAACmJ,KAAK,EAAE1G,QAAQ,EAAEsI,SAAS,CAAC;EACnD;EACA,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;IACjC,OAAO9K,aAAa,CAACkJ,KAAK,EAAE1G,QAAQ,EAAEsI,SAAS,CAAC;EAClD;EACA,IAAItB,KAAK,CAACC,OAAO,CAACqB,SAAS,CAAC,IAAI,CAACA,SAAS,CAACf,MAAM,EAAE;IACjD,OAAOb,KAAK,CAAC1F,eAAe,CAAChB,QAAQ,CAAC;EACxC;EACA,MAAMwI,GAAG,GAAG,CAAC7H,EAAE,GAAG,CAACvB,EAAE,GAAGuI,oBAAoB,CAAC3H,QAAQ,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGZ,EAAE,CAACrE,IAAI,CAAC4M,oBAAoB,EAAEW,SAAS,CAAC,KAAK,IAAI,GAAG3H,EAAE,GAAG2H,SAAS;EAC7I,OAAO5B,KAAK,CAAC+B,YAAY,CAACzI,QAAQ,EAAEwI,GAAG,CAAC;AAC1C,CAAC;AACD,MAAME,4BAA4B,GAAIhG,EAAE,IAAK;EAC3C,IAAItD,EAAE;EACN,OAAO,CAAC,EAAE,CAACA,EAAE,GAAGsD,EAAE,CAACiG,OAAO,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGvJ,EAAE,CAACrE,IAAI,CAAC2H,EAAE,EAAE,iBAAiB,CAAC,CAAC;AAChF,CAAC;AACD,MAAMkG,8BAA8B,GAAGA,CAACC,QAAQ,EAAEC,0BAA0B,KAAK;EAC/E,IAAIJ,4BAA4B,CAACG,QAAQ,CAAC,EAAE;IAC1C;EACF;EACA,MAAME,kCAAkC,GAAGA,CAACC,SAAS,EAAEC,2BAA2B,KAAK;IACrF,IAAI7J,EAAE,EAAEuB,EAAE;IACV,IAAI2G,oBAAoB,CAAC0B,SAAS,CAAC,EAAE;MACnCC,2BAA2B,CAACD,SAAS,CAAC;IACxC;IACA,MAAM;MAAEE,QAAQ,GAAG;IAAG,CAAC,GAAGF,SAAS,IAAI,IAAI,GAAGA,SAAS,GAAG,CAAC,CAAC;IAC5D,MAAMG,cAAc,GAAG,CAACxI,EAAE,GAAG,CAACvB,EAAE,GAAG4J,SAAS,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACI,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGhK,EAAE,CAAC8J,QAAQ,KAAK,IAAI,GAAGvI,EAAE,GAAG,EAAE;IACvI,MAAM0I,WAAW,GAAG,CAAC,GAAGH,QAAQ,EAAE,GAAGC,cAAc,CAAC;IACpDE,WAAW,CAAC1J,OAAO,CAChB+G,KAAK,IAAKkC,8BAA8B,CACvClC,KAAK,EACLuC,2BACF,CACF,CAAC;EACH,CAAC;EACD,MAAMK,IAAI,GAAGT,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAAClC,QAAQ,CAAC1G,WAAW,CAAC,CAAC;EACxE,IAAIqJ,IAAI,CAACtE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACsC,oBAAoB,CAACuB,QAAQ,CAAC,EAAE;IACzDrM,UAAU,CAACoK,cAAc,CAAC2C,WAAW,CAACD,IAAI,CAAC,CAACE,IAAI,CAAC,MAAM;MACrDT,kCAAkC,CAACF,QAAQ,EAAEC,0BAA0B,CAAC;IAC1E,CAAC,CAAC;IACF;EACF;EACAC,kCAAkC,CAACF,QAAQ,EAAEC,0BAA0B,CAAC;AAC1E,CAAC;AACD,MAAM/I,mBAAmB,GAAGA,CAACiE,GAAG,EAAEnE,SAAS,EAAE2I,GAAG,KAAK;EACnDxE,GAAG,CAACrE,OAAO,CAAE+C,EAAE,IAAK;IAClB,IAAI7C,SAAS,IAAI6C,EAAE,EAAE;MACnBA,EAAE,CAAC7C,SAAS,CAAC,GAAG2I,GAAG;MACnB;IACF;IACA,MAAMiB,aAAa,GAAGhD,wBAAwB,CAAC/D,EAAE,CAAC;IAClD,MAAM1C,QAAQ,GAAGH,SAAS,CAACI,WAAW,CAAC,CAAC;IACxC,IAAI,CAACwJ,aAAa,CAACzE,QAAQ,CAAChF,QAAQ,CAAC,EACnC;IACFqI,OAAO,CAAC3F,EAAE,EAAE1C,QAAQ,EAAEwI,GAAG,CAAC;EAC5B,CAAC,CAAC;AACJ,CAAC;AACD,MAAM/E,6BAA6B,GAAGA,CAACoF,QAAQ,EAAExF,0BAA0B,EAAEE,4BAA4B,KAAK;EAC5GqF,8BAA8B,CAACC,QAAQ,EAAExF,0BAA0B,CAAC;EACpE,MAAMqG,iCAAiC,GAAIxJ,GAAG,IAAK;IACjD,IAAId,EAAE;IACN,MAAMsD,EAAE,GAAG,CAACtD,EAAE,GAAGc,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACyJ,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGvK,EAAE,GAAGc,GAAG,CAACwE,MAAM;IACxFrB,0BAA0B,CAACX,EAAE,CAAC;EAChC,CAAC;EACD,MAAMkH,mCAAmC,GAAI1J,GAAG,IAAK;IACnD,IAAId,EAAE;IACN,MAAMsD,EAAE,GAAG,CAACtD,EAAE,GAAGc,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACyJ,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGvK,EAAE,GAAGc,GAAG,CAACwE,MAAM;IACxFnB,4BAA4B,CAACb,EAAE,CAAC;EAClC,CAAC;EACDmG,QAAQ,CAACjF,gBAAgB,CACvB9G,aAAa,CAAC+M,6BAA6B,EAC3CH,iCACF,CAAC;EACDb,QAAQ,CAACjF,gBAAgB,CACvB9G,aAAa,CAACgN,+BAA+B,EAC7CF,mCACF,CAAC;EACD,MAAMG,gBAAgB,GAAIC,aAAa,IAAK;IAC1CA,aAAa,CAACrK,OAAO,CAAEsK,cAAc,IAAK;MACxC,MAAM;QACJC,UAAU,GAAG,EAAE;QACfC,YAAY,GAAG,EAAE;QACjBlJ,IAAI;QACJyD,MAAM;QACN0F;MACF,CAAC,GAAGH,cAAc;MAClB,IAAIhJ,IAAI,KAAK,WAAW,EAAE;QACxB+F,KAAK,CAACqD,SAAS,CAAC1K,OAAO,CAAC5E,IAAI,CAC1BmP,UAAU,EACTI,IAAI,IAAK1B,8BAA8B,CACtC0B,IAAI,EACJjH,0BACF,CACF,CAAC;QACD2D,KAAK,CAACqD,SAAS,CAAC1K,OAAO,CAAC5E,IAAI,CAC1BoP,YAAY,EACXG,IAAI,IAAK1B,8BAA8B,CACtC0B,IAAI,EACJ/G,4BACF,CACF,CAAC;MACH,CAAC,MAAM,IAAItC,IAAI,KAAK,YAAY,IAAImJ,aAAa,KAAKpN,4BAA4B,CAAC+J,uBAAuB,EAAE;QAC1G,IAAIO,oBAAoB,CAAC5C,MAAM,CAAC,EAAE;UAChCrB,0BAA0B,CAACqB,MAAM,CAAC;QACpC,CAAC,MAAM;UACLnB,4BAA4B,CAACmB,MAAM,CAAC;QACtC;MACF;IACF,CAAC,CAAC;EACJ,CAAC;EACD,IAAI6F,WAAW,GAAG,EAAE;EACpB,MAAMC,iBAAiB,GAAIrL,KAAK,IAAK;IACnC,MAAMsL,MAAM,GAAGtL,KAAK,CAACuF,MAAM;IAC3B,IAAI+F,MAAM,CAACnB,IAAI,KAAK,OAAO,EACzB;IACFiB,WAAW,CAAC5K,OAAO,CAChB2K,IAAI,IAAK1B,8BAA8B,CAAC0B,IAAI,EAAE/G,4BAA4B,CAC7E,CAAC;IACDgH,WAAW,GAAG,CACZ,GAAGE,MAAM,CAACC,gBAAgB,CAAC;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC,CAC9C;IACDJ,WAAW,CAAC5K,OAAO,CAChB2K,IAAI,IAAK1B,8BAA8B,CAAC0B,IAAI,EAAEjH,0BAA0B,CAC3E,CAAC;EACH,CAAC;EACDwF,QAAQ,CAACjF,gBAAgB,CAAC,YAAY,EAAE4G,iBAAiB,CAAC;EAC1D,MAAMI,QAAQ,GAAG,IAAIC,gBAAgB,CAACd,gBAAgB,CAAC;EACvDa,QAAQ,CAACE,OAAO,CAACjC,QAAQ,EAAE;IACzBkC,SAAS,EAAE,IAAI;IACfC,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAMzH,WAAW,GAAGA,CAAA,KAAM;IACxBoF,8BAA8B,CAACC,QAAQ,EAAEtF,4BAA4B,CAAC;IACtEsF,QAAQ,CAAC9E,mBAAmB,CAAC,YAAY,EAAEyG,iBAAiB,CAAC;IAC7DI,QAAQ,CAACM,UAAU,CAAC,CAAC;IACrBrC,QAAQ,CAAC9E,mBAAmB,CAC1BjH,aAAa,CAAC+M,6BAA6B,EAC3CH,iCACF,CAAC;IACDb,QAAQ,CAAC9E,mBAAmB,CAC1BjH,aAAa,CAACgN,+BAA+B,EAC7CF,mCACF,CAAC;EACH,CAAC;EACD,OAAOpG,WAAW;AACpB,CAAC;AACD,IAAI,CAAChH,UAAU,CAACoK,cAAc,CAAC5L,GAAG,CAAC,kBAAkB,CAAC,EAAE;EACtDwB,UAAU,CAACoK,cAAc,CAACuE,MAAM,CAAC,kBAAkB,EAAErM,eAAe,CAAC;AACvE;AACA,IAAIsM,wBAAwB,GAAGtM,eAAe;AAC9C,SACEjB,UAAU,EACViB,eAAe,EACfsM,wBAAwB,IAAIC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}